{"version":3,"sources":["components/InputRow.tsx","components/Table.tsx","utils/API.tsx","utils/db.tsx","components/AddExpensesForm.tsx","components/AddIncomeForm.tsx","components/PivotTable.tsx","components/Form.tsx","components/Chart.tsx","components/Edit.tsx","pages/Home.tsx","components/Signup.tsx","pages/Login.tsx","components/Alert.tsx","components/SnackBar.tsx","App.tsx","serviceWorkerRegistration.ts","reportWebVitals.ts","index.tsx"],"names":["StyledTableCell","withStyles","theme","createStyles","body","fontSize","padding","maxWidth","TableCell","StyledTableRow","root","backgroundColor","palette","background","default","blueGrey","paddingLeft","TableRow","InputRow","props","useState","amount","state","setState","makeDataList","propsState","id","map","entry","value","name","handleInputRowChange","event","target","useEffect","fields","filter","column","includes","TextField","onBlur","e","handleChange","i","onChange","className","inputProps","list","InputProps","startAdornment","InputAdornment","position","disableUnderline","style","width","dataLists","persons","narrow_categories","broad_categories","IconButton","color","onClick","handleUpdate","aria-label","deleteEntry","ReportTable","head","primary","main","common","white","classes","makeStyles","table","minWidth","useStyles","myRef","createRef","current","scrollIntoView","behavior","TableContainer","component","Paper","Table","ref","TableHead","schema","textTransform","replace","TableBody","data","checkStatus","res","parseMethod","status","Error","json","text","db","API","addCategories","token","fetch","method","headers","JSON","stringify","then","getCategories","expenses","yearMonthObj","year","month","postExpenses","postBatchExpenses","postIncome","postBatchIncome","deleteExpenses","updateExpenses","income","updateIncome","deleteIncome","pivot","wallchart","dataList","signup","login","checkAuth","a","openDB","upgrade","createObjectStore","autoIncrement","navigator","onLine","checkDatabase","saveRecord","record","put","saveCategories","categories","Object","keys","category","clear","c","loadCategories","getAll","saveWallChartData","loadWallChartData","emptyDatabase","localStorage","getItem","pendingExpenses","length","pendingIncome","console","error","window","addEventListener","AddRecordsForm","React","useContext","AuthContext","Auth","setAuth","setAlertState","initialFormState","date","Date","now","NaN","person_id","broad_category_id","narrow_category_id","vendor","notes","formState","setFormState","currentBroadCategory","setCurrentBroadCategory","currentNarrowCategories","setCurrentNarrowCategories","handleFormChange","narrowCategories","preventDefault","severity","message","open","formStateConvertedDate","toLocaleDateString","setOpenBackdrop","reloadWallChart","type","DialogContent","close","handleClose","Typography","variant","onSubmit","utils","DateFnsUtils","disableToolbar","fullWidth","format","margin","label","KeyboardButtonProps","InputLabelProps","shrink","step","FormControl","formControl","InputLabel","htmlFor","Select","labelId","MenuItem","person","Button","source","DarkTableRow","cursor","LightTableRow","ExtraLightTableRow","PivotTable","show","setShow","pivotState","reduce","b","broad_category","total","parseFloat","narrow_category","log","showState","bCat","newShow","toggleShowRow","toFixed","nCat","Form","handleFormSubmit","Container","Card","form","WallChart","height","options","maintainAspectRatio","Edit","has_person","checked","updatedCategories","setCategories","card","CardContent","FormControlLabel","control","Checkbox","Home","useTheme","getUTCFullYear","getUTCMonth","incomeTableState","setIncomeTableState","expensesTableState","setExpensesTableState","categoriesState","setCategoriesState","useReducer","action","labels","datasets","fill","borderColor","secondary","wallChartData","setWallChartData","formatDates","toString","day","getUTCDate","dateString","route","response","assignId","dataListItem","index","newExpensesTableStateData","updatedRow","err","newIncomeTableStateData","reloadWallChartData","spacing","selectEmpty","marginTop","display","justifyContent","flexWrap","breakpoints","up","down","logoutBtn","float","editBtn","offline","textAlign","speedDial","bottom","right","dialog","datePicker","marginLeft","top","speedDialOpen","setSpeedDialOpen","actions","icon","setAddExpensesOpen","operation","setAddIncomeOpen","addExpensesOpen","addIncomeOpen","editOpen","setEditOpen","setOffline","Box","AppBar","user","Dialog","onClose","SpeedDial","ariaLabel","SpeedDialIcon","onOpen","onMouseLeave","SpeedDialAction","tooltipTitle","tooltipOpen","heading","fontFamily","Signup","username","password","signupFormState","setSignupFormState","formSubmit","flexGrow","signupBtn","sidebar","link","Login","loginFormState","setLoginFormState","signupOpen","setSignupOpen","inputChange","newToken","payload","loggedIn","to","Grid","container","item","xs","gutterBottom","Alert","elevation","snackbar","CustomizedSnackbar","reason","Snackbar","autoHideDuration","defaultTheme","createMuiTheme","green","purple","overrides","MuiPickersBasePicker","MuiCard","MuiDialogContent","MuiPickersCalendarHeader","iconButton","ProtectedRoute","Component","rest","render","createContext","App","backdrop","zIndex","setItem","undefined","alertState","openBackdrop","catch","testDatabase","ThemeProvider","CssBaseline","Provider","path","setLoggedIn","exact","Backdrop","CircularProgress","disableShrink","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","document","getElementById","URL","process","href","origin","contentType","get","indexOf","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.5f83385e.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { DataListStateType, TableDataEntry, AllDataListsType } from '../interfaces/Interfaces'\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport { IconButton, TableCell, TableRow, TextField, InputAdornment } from '@material-ui/core'\r\nimport { withStyles, createStyles, Theme } from '@material-ui/core/styles';\r\nimport { blueGrey } from '@material-ui/core/colors';\r\n\r\n\r\nconst StyledTableCell = withStyles((theme: Theme) =>\r\n    createStyles({\r\n        body: {\r\n            fontSize: 14,\r\n            padding: 0,\r\n            maxWidth: '10ch',\r\n        },\r\n    }),\r\n)(TableCell);\r\n\r\nconst StyledTableRow = withStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            '&:nth-of-type(odd)': {\r\n                backgroundColor: theme.palette.background.default,\r\n            },\r\n            '&:nth-of-type(even)': {\r\n                backgroundColor: blueGrey[800],\r\n            },\r\n            '& input': {\r\n                backgroundColor: 'inherit',\r\n                paddingLeft: 0,\r\n            }\r\n        },\r\n    }),\r\n)(TableRow);\r\n\r\nexport default function InputRow(props:\r\n    {\r\n        entry: TableDataEntry,\r\n        i: number,\r\n        fields: { name: string }[],\r\n        dataLists?: AllDataListsType\r\n        handleChange: Function,\r\n        handleUpdate: Function,\r\n        deleteEntry: Function\r\n    }) {\r\n\r\n    const [state, setState] = useState<TableDataEntry>({ amount: \"\" })\r\n\r\n    function makeDataList(propsState: DataListStateType[], id: string) {\r\n        return (\r\n            <datalist id={id}>\r\n                {propsState.map((entry: DataListStateType) => {\r\n                    return (\r\n                        <option\r\n                            value={entry.name}\r\n                            key={entry.id}\r\n                        />\r\n                    )\r\n                })}\r\n            </datalist>\r\n        )\r\n    }\r\n\r\n    function handleInputRowChange(event: React.ChangeEvent<HTMLInputElement>): void {\r\n        let { name, value } = event.target;\r\n        setState({ ...state, [name]: value })\r\n    }\r\n\r\n    useEffect(() => {\r\n        setState(props.entry)\r\n    }, [props.entry])\r\n\r\n    return (\r\n        <StyledTableRow>\r\n            {props.fields\r\n                .filter(column => !column.name.includes(\"id\"))\r\n                .map(column => {\r\n                    return (\r\n                        <StyledTableCell\r\n\r\n                        >\r\n                            <TextField\r\n                                name={column.name}\r\n                                onBlur={(e: React.FocusEvent<HTMLTextAreaElement | HTMLInputElement>) => {\r\n                                    props.handleChange(e, props.i)\r\n                                }}\r\n                                onChange={handleInputRowChange}\r\n                                className=\"tableInput\"\r\n                                value={state[column.name as keyof TableDataEntry] || \"\"}\r\n                                inputProps={{\r\n                                    list: column.name\r\n                                }}\r\n                                InputProps={\r\n                                     {\r\n                                    startAdornment: <InputAdornment position=\"start\">{column.name === 'amount' ? \"$\" : null}</InputAdornment>,\r\n                                    disableUnderline: true\r\n                                }\r\n                            }\r\n                                style={{ width: '80%' }}\r\n                            />\r\n                            {column.name === 'person' && props.dataLists?.persons ? (\r\n                                makeDataList(props.dataLists?.persons, column.name)\r\n                            ) : null}\r\n                            {column.name === 'narrow_category' && props.dataLists?.narrow_categories ? (\r\n                                makeDataList(props.dataLists?.narrow_categories, column.name)\r\n                            ) : null}\r\n                            {column.name === 'broad_category' && props.dataLists?.broad_categories ? (\r\n                                makeDataList(props.dataLists?.broad_categories, column.name)\r\n                            ) : null}\r\n                        </StyledTableCell>\r\n                    )\r\n                })}\r\n            <StyledTableCell>\r\n                <IconButton\r\n                    color=\"primary\"\r\n                    onClick={() => props.handleUpdate(props.i)}\r\n                >\r\n                    <SaveIcon />\r\n                </IconButton>\r\n            </StyledTableCell>\r\n            <StyledTableCell>\r\n                <IconButton\r\n                    aria-label=\"delete\"\r\n                    color=\"secondary\"\r\n                    onClick={() => props.deleteEntry(state.id)}\r\n                >\r\n                    <DeleteIcon />\r\n                </IconButton>\r\n            </StyledTableCell>\r\n        </StyledTableRow>\r\n    )\r\n}","import React, {useEffect, createRef} from 'react'\r\nimport InputRow from './InputRow'\r\nimport type { TableDataEntry, AllDataListsType } from \"../interfaces/Interfaces\"\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nimport { makeStyles, createStyles, withStyles, Theme } from '@material-ui/core/styles';\r\n\r\nexport default function ReportTable(props:\r\n    {\r\n        state:\r\n        {\r\n            schema:\r\n            {\r\n                fields: { name: string }[]\r\n            },\r\n            data: TableDataEntry[]\r\n\r\n        },\r\n        dataLists?: AllDataListsType\r\n        handleChange: Function,\r\n        handleUpdate: Function,\r\n        deleteEntry: Function,\r\n        form?: string\r\n    }) {\r\n\r\n        const StyledTableCell = withStyles((theme: Theme) =>\r\n        createStyles({\r\n            head: {\r\n                backgroundColor: theme.palette.primary.main,\r\n                color: theme.palette.common.white,\r\n                padding: 10,\r\n                fontSize: 16\r\n            },\r\n        }),\r\n        )(TableCell);\r\n\r\n        const useStyles = makeStyles((theme: Theme) =>\r\n        createStyles({\r\n            table: {\r\n                minWidth: 650,\r\n            },\r\n        })\r\n        );\r\n        const classes = useStyles();\r\n\r\n        // Component scrolls into view on mount\r\n        const myRef = createRef<HTMLTableElement>()\r\n        const executeScroll = () => {\r\n            if (myRef.current) {\r\n                myRef.current.scrollIntoView({behavior: 'smooth'})\r\n            }\r\n        }\r\n    \r\n        useEffect(() => {\r\n            executeScroll()\r\n        })\r\n    return (\r\n        <TableContainer component={Paper}>\r\n            <Table className={classes.table} ref={myRef}>\r\n                <TableHead>\r\n                    <TableRow>\r\n                        {props.state.schema.fields\r\n                            .filter(column => !column.name.includes(\"id\"))\r\n                            .map(column => {\r\n                                return (\r\n                                    <StyledTableCell key={column.name} style={{textTransform: 'capitalize'}}>\r\n                                        {column.name.replace(\"_\", \" \")}\r\n                                    </StyledTableCell>\r\n                                )\r\n                            })}\r\n                        <StyledTableCell><span>Save</span></StyledTableCell>\r\n                        <StyledTableCell><span>Delete</span></StyledTableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody className=\"tableBody\">\r\n                    {(props.state.data).map((entry: TableDataEntry, i: number) => (\r\n                            <InputRow\r\n                                entry={entry}\r\n                                i={i}\r\n                                key={i}\r\n                                fields={props.state.schema.fields}\r\n                                handleChange={props.handleChange}\r\n                                handleUpdate={props.handleUpdate}\r\n                                dataLists={props.dataLists}\r\n                                deleteEntry={props.deleteEntry}\r\n                            />\r\n                    ))}\r\n                </TableBody>\r\n            </Table>\r\n        </TableContainer>\r\n    )\r\n}","import type {\r\n    AllDataListsType, \r\n    FormStateType, \r\n    TableDataEntry, \r\n    TableType,\r\n    ExpensesFormType,\r\n    IncomeFormType,\r\n    EditFormType,\r\n    WallChartDataType} from '../interfaces/Interfaces'\r\n\r\n\r\nfunction checkStatus<T>(res: Response, parseMethod: string): Promise<T> {\r\n    if (res.status === 401) {\r\n        throw new Error(\"Unauthorized\")\r\n    }\r\n    if (res.status === 404) {\r\n        throw new Error(\"No Data\")\r\n    }\r\n    if (res.status !== 200) {\r\n        throw new Error(\"Error! \" + res.status)\r\n    }\r\n    if (parseMethod === 'json'){\r\n        return res.json() as Promise<T>\r\n    } else {\r\n        return res.text() as unknown as Promise<T>\r\n    }\r\n}\r\n\r\nconst API = {\r\n    addCategories: function (token: string | null, data: EditFormType): Promise<Response | string> {\r\n        return fetch(`/api/categories/`, {\r\n            method: 'POST',\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        }).then(res=>checkStatus<string>(res, 'text'))\r\n    },\r\n    getCategories: function (token: string | null): Promise<AllDataListsType> {\r\n        return fetch(`/api/categories/`, {\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`,\r\n            },\r\n        }).then(res=>checkStatus<AllDataListsType>(res, 'json'))\r\n    },\r\n    expenses: function (token: string | null, yearMonthObj: FormStateType): Promise<{schema: { fields: [] }, data: TableDataEntry[]}> {\r\n        return fetch(`/api/expenses/${yearMonthObj.year}/${yearMonthObj.month}`, {\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`\r\n            }\r\n        }).then(res=>checkStatus<TableType>(res, 'json'))\r\n    },\r\n    postExpenses: function (token: string | null, data:ExpensesFormType): Promise<Response | string> {\r\n        return fetch(`/api/expenses/`, {\r\n            method: 'POST',\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        }).then(res=>checkStatus<string>(res, 'text'))\r\n    },\r\n    postBatchExpenses: function (token: string | null, data:ExpensesFormType[]): Promise<Response | string> {\r\n        return fetch(`/api/expenses/batch`, {\r\n            method: 'POST',\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        }).then(res=>checkStatus<string>(res, 'text'))\r\n    },\r\n    postIncome: function (token: string | null, data:IncomeFormType): Promise<Response | string> {\r\n        return fetch(`/api/income/`, {\r\n            method: 'POST',\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        }).then(res=>checkStatus<string>(res, 'text'))\r\n    },\r\n    postBatchIncome: function (token: string | null, data:IncomeFormType[]): Promise<Response | string> {\r\n        return fetch(`/api/income/batch`, {\r\n            method: 'POST',\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        }).then(res=>checkStatus<string>(res, 'text'))\r\n    },\r\n    deleteExpenses: function (token: string | null, id: number | undefined): Promise<Response | string> {\r\n        return fetch(`/api/expenses/${id}`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`\r\n            }\r\n        }).then(res=>checkStatus<string>(res, 'text'))\r\n    },\r\n    updateExpenses: function (token: string | null, data: TableDataEntry): Promise<Response | string> {\r\n        return fetch(`/api/expenses/${data.id}`, {\r\n            method: 'PUT',\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        }).then(res=>checkStatus<string>(res, 'text'))\r\n    },\r\n    income: function (token: string | null, yearMonthObj: FormStateType): Promise<{schema: { fields: [] }, data: TableDataEntry[]}> {\r\n        return fetch(`/api/income/${yearMonthObj.year}/${yearMonthObj.month}`, {\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`\r\n            }\r\n        }).then(res=>checkStatus<TableType>(res, 'json'))\r\n    },\r\n    updateIncome: function (token: string | null, data: TableDataEntry): Promise<Response | string> {\r\n        return fetch(`/api/income/${data.id}`, {\r\n            method: 'PUT',\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        }).then(res=>checkStatus<string>(res, 'text'))\r\n    },\r\n    deleteIncome: function (token: string | null, id: number | undefined): Promise<Response | string> {\r\n        return fetch(`/api/income/${id}`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`\r\n            }\r\n        }).then(res=>checkStatus<string>(res, 'text'))\r\n    },\r\n    pivot: function (token: string | null, yearMonthObj: FormStateType): Promise<{schema: { fields: [] }, data: TableDataEntry[]}> {\r\n        return fetch(`/api/expenses/${yearMonthObj.year}/${yearMonthObj.month}`, {\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`\r\n            }\r\n        }).then(res=>checkStatus<TableType>(res, 'json'))\r\n    },\r\n    wallchart: function (token: string | null): Promise<WallChartDataType> {\r\n        return fetch(`/wallchart`, {\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`\r\n            }\r\n        }).then(res=>checkStatus<WallChartDataType>(res, 'json'))\r\n    },\r\n\r\n    dataList: function (token: string | null): Promise<AllDataListsType> {\r\n        return fetch(`/api/datalists`, {\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`\r\n            }\r\n        }).then(res => checkStatus<AllDataListsType>(res, 'json'))\r\n    },\r\n    signup: function (data: { username: string, password: string }): Promise<Response | string> {\r\n        return fetch('/auth/signup', {\r\n            method: \"POST\",\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        }).then(res => checkStatus<string>(res, 'text'))\r\n    },\r\n    login: function (data: { username: string, password: string }): Promise<{ token: string }> {\r\n        return fetch('/auth/login', {\r\n            method: \"POST\",\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        }).then(res => checkStatus<{ token: string }>(res, 'json'))\r\n    },\r\n    checkAuth: function (token: string | null): Promise<{username: string, token: string}> {\r\n        return fetch(`/auth/checkAuth`, {\r\n            headers: {\r\n                \"authorization\": `Bearer ${token}`\r\n            }\r\n        }).then(res =>checkStatus<{username: string, token: string}>(res, 'json'))\r\n    }\r\n}\r\n\r\nexport default API","import { openDB, DBSchema, IDBPDatabase } from 'idb'\nimport { AllDataListsType, ExpensesFormType, IncomeFormType, WallChartDataType } from '../interfaces/Interfaces';\nimport API from './API';\n\ninterface financesDB extends DBSchema {\n  expenses: {\n    value: {\n      amount: number,\n      date: Date | null,\n      person_id: number,\n      vendor: string,\n      broad_category_id: number,\n      narrow_category_id: number,\n      notes: string\n    },\n    key: string\n  },\n  income: {\n    value: {\n      date: Date | null,\n      amount: number,\n      person_id: number,\n      source: string,\n    },\n    key: string\n  },\n  broad_categories: {\n    value: {\n      name: string,\n      id: number,\n      person: boolean\n    },\n    key: string\n  },\n  narrow_categories: {\n    value: {\n      name: string,\n      id: number,\n      broad_category_id: number\n    },\n    key: string\n  },\n  persons: {\n    value: {\n      name: string,\n      id: number\n    },\n    key: string\n  },\n  wallchart: {\n    value: {\n      labels: string[],\n      income: number[],\n      expenses: number[]\n    },\n    key: string\n  },\n}\n\n\nlet db: IDBPDatabase<financesDB>;\nexport async function testDatabase() {\n  db = await openDB<financesDB>(\"finances\", 1, {\n    async upgrade(db) {\n      db.createObjectStore('expenses', { autoIncrement: true })\n      db.createObjectStore('income', { autoIncrement: true })\n      db.createObjectStore('broad_categories', { autoIncrement: true })\n      db.createObjectStore('narrow_categories', { autoIncrement: true })\n      db.createObjectStore('persons', { autoIncrement: true })\n      db.createObjectStore('wallchart', { autoIncrement: true })\n    }\n  });\n\n  if (navigator.onLine) {\n    checkDatabase();\n  }\n}\n\nexport async function saveRecord(table: 'income' | 'expenses', record: ExpensesFormType | IncomeFormType) {\n  await db.put(table, record);\n}\n\nexport async function saveCategories(categories: AllDataListsType) {\n  (Object.keys(categories) as Array<keyof AllDataListsType>).map((category: keyof AllDataListsType) => {\n    db.clear(category)\n    categories[category as keyof AllDataListsType]?.map(c => {\n      db.put(category, c)\n    })\n  })\n}\n\nexport async function loadCategories() {\n  let tables: Array<keyof AllDataListsType> = ['broad_categories', 'narrow_categories', 'persons']\n  let categories: AllDataListsType = {\n    'broad_categories': [],\n    'narrow_categories': [],\n    'persons': []\n  };\n  tables.map(async table => {\n    let category = await db.getAll(table)\n    categories[table] = category\n  })\n  return categories\n}\n\nexport async function saveWallChartData(data: WallChartDataType) {\n  await db.clear('wallchart');\n  db.put('wallchart', data);\n}\n\nexport async function loadWallChartData(): Promise<WallChartDataType> {\n  let data = await db.getAll('wallchart');\n  return data[0];\n}\n\nexport async function emptyDatabase(): Promise<string> {\n  try {\n    await db.clear('expenses')\n    await db.clear('income')\n    return \"pendingFinances cleared!\"\n  } catch (err) {\n    return err\n  }\n}\n\nasync function checkDatabase() {\n  let token = localStorage.getItem('token')\n  try {\n    const pendingExpenses = await db.getAll(\"expenses\");\n    if (pendingExpenses.length > 0) {\n      await API.postBatchExpenses(token, pendingExpenses)\n      // delete records if successful\n      db.clear('expenses')\n    }\n    const pendingIncome = await db.getAll(\"income\");\n    if (pendingIncome.length > 0) {\n      await API.postBatchIncome(token, pendingIncome)\n      // delete records if successful\n      db.clear('income')\n    }\n  } catch (err) {\n    console.error(err)\n  }\n}\n\n// listen for app coming back online\nwindow.addEventListener(\"online\", checkDatabase);","import React, { useState } from 'react'\r\nimport API from '../utils/API'\r\nimport { saveRecord } from '../utils/db'\r\nimport { AuthContext } from '../App'\r\nimport { ExpensesFormType, AllDataListsType, DataListStateType } from '../interfaces/Interfaces'\r\nimport {\r\n    Button,\r\n    FormControl,\r\n    InputLabel,\r\n    MenuItem,\r\n    Select,\r\n    TextField,\r\n    InputAdornment,\r\n    Typography,\r\n    DialogContent,\r\n    IconButton\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close'\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport {\r\n    MuiPickersUtilsProvider,\r\n    KeyboardDatePicker,\r\n} from '@material-ui/pickers';\r\n\r\n\r\nexport default function AddRecordsForm(props: {\r\n    classes: { root: string, formControl: string, close: string },\r\n    handleClose: Function,\r\n    categories: AllDataListsType,\r\n    setOpenBackdrop: Function,\r\n    reloadWallChart: Function\r\n}) {\r\n    const { Auth, setAuth, setAlertState } = React.useContext(AuthContext)\r\n\r\n    const initialFormState = {\r\n        date: new Date(Date.now()),\r\n        amount: NaN,\r\n        person_id: NaN,\r\n        broad_category_id: NaN,\r\n        narrow_category_id: NaN,\r\n        vendor: \"\",\r\n        notes: \"\"\r\n    }\r\n\r\n    // Form control state\r\n    const [formState, setFormState] = useState<ExpensesFormType>(initialFormState)\r\n\r\n    // State to hold category info\r\n    const [currentBroadCategory, setCurrentBroadCategory] = useState<DataListStateType>({\r\n        name: \"\",\r\n        id: NaN,\r\n    })\r\n\r\n    const [currentNarrowCategories, setCurrentNarrowCategories] = useState<DataListStateType[]>([])\r\n\r\n    function handleFormChange(event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | { name?: string; value: unknown }>): void {\r\n        let name = event.target.name as keyof typeof formState\r\n        setFormState({ ...formState, [name]: event.target.value })\r\n        if (name === 'broad_category_id') {\r\n            let category = props.categories.broad_categories.filter(i => i.id === event.target.value)[0]\r\n            setCurrentBroadCategory(category)\r\n            let narrowCategories = props.categories.narrow_categories.filter(i => i.broad_category_id === category.id)\r\n            setCurrentNarrowCategories(narrowCategories)\r\n        }\r\n    }\r\n\r\n    function handleDateChange(date: Date | null) {\r\n        setFormState({ ...formState, date: date });\r\n    };\r\n\r\n    async function handleFormSubmit(event: React.SyntheticEvent): Promise<any> {\r\n        event.preventDefault()\r\n        if (!formState.date || !formState.amount || !formState.broad_category_id || !formState.vendor) {\r\n            setAlertState({\r\n                severity: \"error\",\r\n                message: \"Please fill out all fields\",\r\n                open: true\r\n            })\r\n            return\r\n        }\r\n        let formStateConvertedDate: any = { ...formState }\r\n        formStateConvertedDate.date = formStateConvertedDate.date?.toLocaleDateString(\"en-US\")\r\n        try {\r\n            props.setOpenBackdrop(true)\r\n            await API.postExpenses(Auth.token, formStateConvertedDate)\r\n            props.setOpenBackdrop(false)\r\n            setAlertState({\r\n                severity: \"success\",\r\n                message: \"Record Saved!\",\r\n                open: true\r\n            })\r\n            props.reloadWallChart()\r\n        } catch (err) {\r\n            props.setOpenBackdrop(false)\r\n            if (err.message === \"Error! 500\") {\r\n                setAlertState({\r\n                    severity: \"error\",\r\n                    message: \"Server Error! Contact Eli\",\r\n                    open: true\r\n                })\r\n                return\r\n            } else {\r\n                saveRecord('expenses', formStateConvertedDate)\r\n                if (err.message === \"Unauthorized\") {\r\n                    setAuth({ type: 'LOGOUT' })\r\n                }\r\n                setAlertState({\r\n                    severity: \"warning\",\r\n                    message: \"Record Saved Locally\",\r\n                    open: true\r\n                })\r\n            }\r\n        } finally {\r\n            setFormState(initialFormState)\r\n            setCurrentBroadCategory({\r\n                name: \"\",\r\n                id: NaN\r\n            })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <DialogContent>\r\n            <IconButton\r\n                className={props.classes.close}\r\n                onClick={() => {\r\n                    setFormState(initialFormState)\r\n                    props.handleClose()\r\n                }}><CloseIcon /></IconButton>\r\n            <Typography variant=\"h5\" component=\"h5\" className={props.classes.root}>Log Expense</Typography>\r\n            <form className={props.classes.root} onSubmit={handleFormSubmit}>\r\n                <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n                    <KeyboardDatePicker\r\n                        disableToolbar\r\n                        fullWidth\r\n                        variant=\"inline\"\r\n                        format=\"MM/dd/yyyy\"\r\n                        margin=\"normal\"\r\n                        id=\"date-picker-inline\"\r\n                        name=\"Date\"\r\n                        label=\"Date\"\r\n                        value={formState.date}\r\n                        onChange={handleDateChange}\r\n                        KeyboardButtonProps={{\r\n                            'aria-label': 'change date',\r\n                        }}\r\n                    />\r\n                </MuiPickersUtilsProvider>\r\n                <TextField\r\n                    onChange={handleFormChange}\r\n                    value={formState.vendor}\r\n                    label=\"Vendor\"\r\n                    name=\"vendor\"\r\n                    type=\"string\"\r\n                    InputLabelProps={{ shrink: true }}\r\n                />\r\n                <TextField\r\n                    onChange={handleFormChange}\r\n                    value={formState.amount}\r\n                    label=\"Amount\"\r\n                    name=\"amount\"\r\n                    type=\"number\"\r\n                    InputProps={{\r\n                        startAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\r\n                    }}\r\n                    inputProps={{ step: \"0.01\" }}\r\n                />\r\n                <FormControl\r\n                    className={props.classes.formControl}>\r\n                    <InputLabel htmlFor=\"broad_category\">Broad Category</InputLabel>\r\n                    <Select\r\n                        onChange={handleFormChange}\r\n                        value={formState.broad_category_id}\r\n                        name=\"broad_category_id\"\r\n                        labelId=\"broad_category\"\r\n                        label=\"Broad Category\"\r\n                    >\r\n                        {props.categories.broad_categories.map(i => (\r\n                            <MenuItem value={i.id}>{i.name}</MenuItem>\r\n                        ))}\r\n                    </Select>\r\n                </FormControl>\r\n                {currentNarrowCategories.length > 0 ? (\r\n                    <FormControl className={props.classes.formControl}>\r\n                        <InputLabel htmlFor=\"narrow_category\">Narrow Category</InputLabel>\r\n                        <Select\r\n                            onChange={handleFormChange}\r\n                            value={formState.narrow_category_id}\r\n                            name=\"narrow_category_id\"\r\n                            labelId=\"narrow_category\"\r\n                            label=\"Narrow Category\"\r\n                        >\r\n                            {/* Get the list of narrow categories corresponding to the selected broad category */}\r\n                            {currentNarrowCategories?.map(i => (\r\n                                <MenuItem value={i.id}>{i.name}</MenuItem>\r\n                            ))}\r\n                        </Select>\r\n                    </FormControl>\r\n                ) : null}\r\n                {currentBroadCategory.person ? (\r\n\r\n                    <FormControl className={props.classes.formControl}>\r\n                        <InputLabel htmlFor=\"person_id\">Person</InputLabel>\r\n                        <Select\r\n                            onChange={handleFormChange}\r\n                            value={formState.person_id}\r\n                            name=\"person_id\"\r\n                            labelId=\"person_id\"\r\n                            label=\"Person\"\r\n                        >\r\n                            {props.categories.persons.map(i => (\r\n                                <MenuItem value={i.id}>{i.name}</MenuItem>\r\n                            ))}\r\n                        </Select>\r\n                    </FormControl>\r\n                ) : null}\r\n                <TextField\r\n                    onChange={handleFormChange}\r\n                    value={formState.notes}\r\n                    label=\"Notes\"\r\n                    name=\"notes\"\r\n                    type=\"string\"\r\n                    InputLabelProps={{ shrink: true }}\r\n                />\r\n                <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                >Submit</Button>\r\n            </form>\r\n        </DialogContent>\r\n    )\r\n}","import React, { useState } from 'react'\r\nimport API from '../utils/API'\r\nimport { AuthContext } from '../App'\r\nimport type { IncomeFormType, AllDataListsType } from '../interfaces/Interfaces'\r\nimport {\r\n    Button,\r\n    FormControl,\r\n    InputLabel,\r\n    MenuItem,\r\n    Select,\r\n    TextField,\r\n    InputAdornment,\r\n    Typography,\r\n    DialogContent,\r\n    IconButton\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close'\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport {\r\n    MuiPickersUtilsProvider,\r\n    KeyboardDatePicker,\r\n} from '@material-ui/pickers';\r\nimport { saveRecord } from '../utils/db';\r\n\r\n\r\nexport default function AddRecordsForm(props: {\r\n    classes: { root: string, formControl: string, close: string },\r\n    handleClose: Function,\r\n    categories: AllDataListsType,\r\n    setOpenBackdrop: Function,\r\n    reloadWallChart: Function\r\n}) {\r\n\r\n    const { Auth, setAuth, setAlertState } = React.useContext(AuthContext)\r\n\r\n    const initialFormState = {\r\n        date: new Date(Date.now()),\r\n        amount: NaN,\r\n        person_id: NaN,\r\n        source: \"\",\r\n    }\r\n\r\n    // Form control state\r\n    const [formState, setFormState] = useState<IncomeFormType>(initialFormState)\r\n\r\n\r\n    function handleFormChange(event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | { name?: string; value: unknown }>): void {\r\n        let name = event.target.name as keyof typeof formState\r\n        setFormState({ ...formState, [name]: event.target.value })\r\n    }\r\n\r\n    function handleDateChange(date: Date | null) {\r\n        setFormState({ ...formState, date: date });\r\n    };\r\n\r\n    async function handleFormSubmit(event: React.SyntheticEvent): Promise<any> {\r\n        event.preventDefault()\r\n        if (!formState.date || !formState.amount || !formState.person_id || !formState.source) {\r\n            setAlertState({\r\n                severity: \"error\",\r\n                message: \"Please fill out all fields\",\r\n                open: true\r\n            })\r\n            return\r\n        }\r\n        let formStateConvertedDate: any = { ...formState }\r\n        try {\r\n            formStateConvertedDate.date = formStateConvertedDate.date?.toLocaleDateString(\"en-US\")\r\n            props.setOpenBackdrop(true)\r\n            await API.postIncome(Auth.token, formStateConvertedDate)\r\n            props.setOpenBackdrop(false)\r\n            setAlertState({\r\n                severity: \"success\",\r\n                message: \"Record Saved!\",\r\n                open: true\r\n            })\r\n            props.reloadWallChart()\r\n        } catch (err) {\r\n            props.setOpenBackdrop(false)\r\n            if (err.message === \"Error! 500\") {\r\n                setAlertState({\r\n                    severity: \"error\",\r\n                    message: \"Server Error!\",\r\n                    open: true\r\n                })\r\n                return\r\n            } else {\r\n                saveRecord('income', formStateConvertedDate)\r\n                setAlertState({\r\n                    severity: \"warning\",\r\n                    message: \"Record Saved Locally\",\r\n                    open: true\r\n                })\r\n                if (err.message === \"Unauthorized\") {\r\n                    setAuth({ type: 'LOGOUT' })\r\n                }\r\n            }\r\n        } finally {\r\n            setFormState(initialFormState)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <DialogContent>\r\n            <IconButton\r\n                className={props.classes.close}\r\n                onClick={() => {\r\n                    setFormState(initialFormState)\r\n                    props.handleClose()\r\n                }}><CloseIcon /></IconButton>\r\n            <Typography variant=\"h5\" component=\"h5\" className={props.classes.root}>Log Income</Typography>\r\n            <form className={props.classes.root} onSubmit={handleFormSubmit}>\r\n                <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n                    <KeyboardDatePicker\r\n                        disableToolbar\r\n                        variant=\"inline\"\r\n                        format=\"MM/dd/yyyy\"\r\n                        margin=\"normal\"\r\n                        id=\"date-picker-inline\"\r\n                        name=\"Date\"\r\n                        label=\"Date\"\r\n                        value={formState.date}\r\n                        onChange={handleDateChange}\r\n                        KeyboardButtonProps={{\r\n                            'aria-label': 'change date',\r\n                        }}\r\n                    />\r\n                </MuiPickersUtilsProvider>\r\n                <TextField\r\n                    onChange={handleFormChange}\r\n                    value={formState.source}\r\n                    label=\"Source\"\r\n                    name=\"source\"\r\n                    type=\"string\"\r\n                    InputLabelProps={{ shrink: true }}\r\n                />\r\n                <TextField\r\n                    onChange={handleFormChange}\r\n                    value={formState.amount}\r\n                    label=\"Amount\"\r\n                    name=\"amount\"\r\n                    type=\"number\"\r\n                    InputProps={{\r\n                        startAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\r\n                    }}\r\n                    inputProps={{ step: \"0.01\" }}\r\n                />\r\n                <FormControl className={props.classes.formControl}>\r\n                    <InputLabel htmlFor=\"person_id\">Person</InputLabel>\r\n                    <Select\r\n                        onChange={handleFormChange}\r\n                        value={formState.person_id}\r\n                        name=\"person_id\"\r\n                        labelId=\"person_id\"\r\n                        label=\"Person\"\r\n                    >\r\n                        {props.categories.persons.map(i => (\r\n                            <MenuItem value={i.id}>{i.name}</MenuItem>\r\n                        ))}\r\n                    </Select>\r\n                </FormControl>\r\n\r\n                <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                >Submit</Button>\r\n            </form>\r\n        </DialogContent>\r\n    )\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { Paper, Table, TableBody, TableContainer, TableCell, TableRow, TableHead } from '@material-ui/core';\r\nimport { withStyles, createStyles, Theme } from '@material-ui/core/styles'\r\nimport { TableDataEntry } from '../interfaces/Interfaces';\r\nimport { blueGrey } from '@material-ui/core/colors';\r\n\r\n// import StaticRow from './StaticRow';\r\n\r\nconst StyledTableCell = withStyles((theme: Theme) =>\r\n    createStyles({\r\n        head: {\r\n            backgroundColor: theme.palette.primary.main,\r\n            color: theme.palette.common.white,\r\n            padding: 10,\r\n            fontSize: 16\r\n        },\r\n        body: {\r\n            padding: 10,\r\n            fontSize: 14,\r\n        },\r\n    }),\r\n)(TableCell);\r\n\r\nconst DarkTableRow = withStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            backgroundColor: theme.palette.background.default,\r\n            cursor: 'pointer'\r\n        },\r\n    }),\r\n)(TableRow);\r\n\r\nconst LightTableRow = withStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            backgroundColor: blueGrey[800],\r\n        },\r\n    }),\r\n)(TableRow);\r\n\r\nconst ExtraLightTableRow = withStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            backgroundColor: blueGrey[700],\r\n        },\r\n    }),\r\n)(TableRow);\r\n\r\nexport default function PivotTable(props: {\r\n    state:\r\n    {\r\n        schema:\r\n        {\r\n            fields: { name: string }[]\r\n        },\r\n        data: TableDataEntry[]\r\n\r\n    },\r\n}) {\r\n\r\n    const [show, setShow] = useState<boolean[]>([false])\r\n\r\n    function toggleShowRow(i: number) {\r\n        let newShow = [...show]\r\n        newShow[i] = !newShow[i]\r\n        setShow(newShow)\r\n    }\r\n\r\n    const pivotState = props.state.data.reduce((a, b) => {\r\n        if (b.broad_category) {\r\n            if (a[b.broad_category]) {\r\n                a[b.broad_category].total += parseFloat(b.amount);\r\n            } else {\r\n                a[b.broad_category] = { total: parseFloat(b.amount), narrow_categories: {} };\r\n            }\r\n            if (b.narrow_category) {\r\n                if (a[b.broad_category].narrow_categories[b.narrow_category]) {\r\n                    a[b.broad_category].narrow_categories[b.narrow_category].total += parseFloat(b.amount);\r\n                } else {\r\n                    a[b.broad_category].narrow_categories[b.narrow_category] = {total: parseFloat(b.amount), persons: {}}   ;\r\n                }\r\n                if (b.person) {\r\n                    if (a[b.broad_category].narrow_categories[b.narrow_category].persons[b.person]) {\r\n                        a[b.broad_category].narrow_categories[b.narrow_category].persons[b.person] += parseFloat(b.amount);\r\n                    } else {\r\n                        a[b.broad_category].narrow_categories[b.narrow_category].persons[b.person] = parseFloat(b.amount);\r\n                    }\r\n                }\r\n            } else if (b.person) {\r\n                if (a[b.broad_category].narrow_categories[\"--\"]?.persons[b.person]) {\r\n                    a[b.broad_category].narrow_categories[\"--\"].persons[b.person] += parseFloat(b.amount);\r\n                    a[b.broad_category].narrow_categories[\"--\"].total += parseFloat(b.amount);\r\n                } else {\r\n                a[b.broad_category].narrow_categories = {...a[b.broad_category].narrow_categories, \"--\": {persons: {[b.person]: parseFloat(b.amount)}, total: parseFloat(b.amount)}}\r\n                }\r\n            }\r\n        }\r\n        return a\r\n    }, {} as any)\r\n\r\n    console.log(pivotState)\r\n\r\n    useEffect(() => {\r\n        let showState = Object.keys(pivotState).map((i: any) => false)\r\n        setShow(showState)\r\n    }, [props])\r\n    return (\r\n        <TableContainer component={Paper}>\r\n            <Table>\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <StyledTableCell>\r\n                            Broad category\r\n                        </StyledTableCell>\r\n                        <StyledTableCell>\r\n                            Narrow Category\r\n                        </StyledTableCell>\r\n                        <StyledTableCell>\r\n                            person\r\n                        </StyledTableCell>\r\n                        <StyledTableCell>\r\n                            amount\r\n                        </StyledTableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {Object.keys(pivotState).map((bCat, i) => (\r\n                        <>\r\n                            <DarkTableRow key={i} onClick={() => toggleShowRow(i)}>\r\n                                <StyledTableCell>\r\n                                    {bCat}\r\n                                </StyledTableCell>\r\n                                <StyledTableCell>\r\n                                    TOTAL\r\n                                </StyledTableCell>\r\n                                <StyledTableCell>\r\n                                    {/* Empty Cell */}\r\n                                </StyledTableCell>\r\n                                <StyledTableCell>\r\n                                    ${pivotState[bCat].total.toFixed(2)}\r\n                                </StyledTableCell>\r\n                            </DarkTableRow>\r\n                            {pivotState[bCat].narrow_categories && show[i] ? (\r\n                                Object.keys(pivotState[bCat].narrow_categories).map(nCat => (\r\n                                    <>\r\n                                        <LightTableRow>\r\n                                            <StyledTableCell>\r\n                                                {/* Empty Cell */}\r\n                                            </StyledTableCell>\r\n                                            <StyledTableCell>\r\n                                                {nCat}\r\n                                            </StyledTableCell>\r\n                                            <StyledTableCell>\r\n                                                TOTAL\r\n                                            </StyledTableCell>\r\n                                            <StyledTableCell>\r\n                                                ${pivotState[bCat].narrow_categories[nCat].total.toFixed(2)}\r\n                                            </StyledTableCell>\r\n                                        </LightTableRow>\r\n                                        {pivotState[bCat].narrow_categories[nCat].persons ? (\r\n                                            Object.keys(pivotState[bCat].narrow_categories[nCat].persons).map((person: string) => (\r\n                                                <ExtraLightTableRow>\r\n                                                    <StyledTableCell>\r\n                                                    </StyledTableCell>\r\n                                                    <StyledTableCell>\r\n                                                    </StyledTableCell>\r\n                                                    <StyledTableCell>\r\n                                                        {person}\r\n                                                    </StyledTableCell>\r\n                                                    <StyledTableCell>\r\n                                                        ${pivotState[bCat].narrow_categories[nCat].persons[person].toFixed(2)}\r\n\r\n                                                    </StyledTableCell>\r\n                                                </ExtraLightTableRow>\r\n                                            ))\r\n                                            ) : null\r\n                                        }\r\n                                    </>\r\n                                ))\r\n                            ) : null}\r\n                        </>\r\n                    ))}\r\n                </TableBody>\r\n            </Table>\r\n        </TableContainer>\r\n    )\r\n}","import React from 'react'\r\nimport {\r\n    Container,\r\n    Card,\r\n    FormControl,\r\n    InputLabel,\r\n    Select,\r\n    TextField,\r\n    MenuItem,\r\n    Button\r\n} from '@material-ui/core'\r\nimport {FormStateType} from '../interfaces/Interfaces'\r\n\r\nexport default function Form({\r\n    classes, \r\n    handleFormSubmit, \r\n    handleFormChange, \r\n    formState }: {\r\n    classes: {\r\n        root: string, \r\n        formControl: string\r\n    },\r\n    handleFormSubmit: (event: React.FormEvent<HTMLFormElement>) => void,\r\n    handleFormChange: (event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | { name?: string; value: unknown }> | React.ChangeEvent<HTMLSelectElement>)=> void,\r\n    formState: FormStateType\r\n}) {\r\n    return (\r\n        <Container className={classes.root}>\r\n                    <Card variant=\"outlined\">\r\n                        <h2 className={classes.root}>Reports</h2>\r\n                        <form onSubmit={handleFormSubmit} className={classes.root}>\r\n                            <FormControl variant=\"outlined\" className={classes.formControl}>\r\n                                <InputLabel htmlFor=\"form\">Report</InputLabel>\r\n                                <Select\r\n                                    name=\"form\"\r\n                                    label=\"Report\"\r\n                                    labelId=\"form\"\r\n                                    value={formState.form}\r\n                                    onChange={handleFormChange}>\r\n                                    <MenuItem value=\"income\">Income</MenuItem>\r\n                                    <MenuItem value=\"expenses\">Expenses</MenuItem>\r\n                                    <MenuItem value=\"pivot\">Pivot Table</MenuItem>\r\n                                </Select>\r\n                            </FormControl>\r\n                            <TextField\r\n                                onChange={handleFormChange}\r\n                                value={formState.year}\r\n                                label=\"Year\"\r\n                                name=\"year\"\r\n                                type=\"number\"\r\n                                variant=\"outlined\"\r\n                            />\r\n                            <FormControl variant=\"outlined\" className={classes.formControl}>\r\n                                <InputLabel htmlFor=\"month2\">Month</InputLabel>\r\n                                <Select\r\n                                    onChange={handleFormChange}\r\n                                    value={formState.month}\r\n                                    name=\"month\"\r\n                                    labelId=\"month2\"\r\n                                    label=\"Month\"\r\n                                >\r\n                                    <MenuItem value={1}>January</MenuItem>\r\n                                    <MenuItem value={2}>February</MenuItem>\r\n                                    <MenuItem value={3}>March</MenuItem>\r\n                                    <MenuItem value={4}>April</MenuItem>\r\n                                    <MenuItem value={5}>May</MenuItem>\r\n                                    <MenuItem value={6}>June</MenuItem>\r\n                                    <MenuItem value={7}>July</MenuItem>\r\n                                    <MenuItem value={8}>August</MenuItem>\r\n                                    <MenuItem value={9}>September</MenuItem>\r\n                                    <MenuItem value={10}>October</MenuItem>\r\n                                    <MenuItem value={11}>November</MenuItem>\r\n                                    <MenuItem value={12}>December</MenuItem>\r\n                                </Select>\r\n                            </FormControl>\r\n                            <Button\r\n                                type=\"submit\"\r\n                                variant=\"contained\"\r\n                                color=\"primary\"\r\n                            >\r\n                                View\r\n                        </Button>\r\n                        </form>\r\n                    </Card>\r\n                </Container>\r\n    )\r\n}","import React from \"react\";\r\nimport { Container } from '@material-ui/core';\r\nimport { Line } from \"react-chartjs-2\";\r\nimport { ChartJSDataType } from \"../interfaces/Interfaces\";\r\n\r\n\r\nexport default function WallChart({data}: {data: ChartJSDataType}) {\r\n    return (\r\n        <Container>\r\n            <Line data={data} height={400} options={{\r\n\t\tmaintainAspectRatio: false\r\n\t}}/>\r\n        </Container>\r\n    );\r\n}","import React, { useState } from 'react'\r\nimport {\r\n    DialogContent,\r\n    Typography,\r\n    Button,\r\n    TextField,\r\n    FormControl,\r\n    FormControlLabel,\r\n    InputLabel,\r\n    Select,\r\n    MenuItem,\r\n    Checkbox,\r\n    Card,\r\n    CardContent,\r\n    IconButton\r\n} from '@material-ui/core'\r\nimport CloseIcon from '@material-ui/icons/Close'\r\nimport { AllDataListsType, EditFormType } from '../interfaces/Interfaces'\r\nimport API from '../utils/API'\r\nimport { AuthContext } from '../App'\r\n\r\nexport default function Edit(props: {\r\n    handleClose: Function,\r\n    classes: { root: string, formControl: string, card: string, close: string },\r\n    categories: AllDataListsType,\r\n    setCategories: Function,\r\n    setOpenBackdrop: Function\r\n}) {\r\n    const { Auth, setAuth, setAlertState } = React.useContext(AuthContext)\r\n\r\n    const initialFormState = {\r\n        person: \"\",\r\n        broad_category: \"\",\r\n        broad_category_id: NaN,\r\n        narrow_category: \"\",\r\n        has_person: false\r\n    }\r\n\r\n    // Form control state\r\n    const [formState, setFormState] = useState<EditFormType>(initialFormState)\r\n\r\n    function handleFormChange(event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | { name?: string; value: unknown }>): void {\r\n        let name = event.target.name as keyof EditFormType\r\n        let value = event.target.value\r\n        if (name === 'has_person') {\r\n            // Casting event.target so that ts knows check property will be there\r\n            value = (event.target as HTMLInputElement).checked\r\n        }\r\n        setFormState({ ...formState, [name]: value })\r\n    }\r\n\r\n    async function handleFormSubmit(event: React.SyntheticEvent, form: 'person' | 'narrow_category' | 'broad_category'): Promise<any> {\r\n        event.preventDefault()\r\n        props.setOpenBackdrop(true)\r\n        let data\r\n        try {\r\n            switch (form) {\r\n                case 'person':\r\n                    data = { person: formState.person }\r\n                    if (!data.person) {\r\n                        throw new Error(\"Empty Input\")\r\n                    }\r\n                    break;\r\n                case 'broad_category':\r\n                    data = {\r\n                        broad_category: formState.broad_category,\r\n                        has_person: formState.has_person\r\n                    }\r\n                    if (!data.broad_category) {\r\n                        throw new Error(\"Empty Input\")\r\n                    }\r\n                    break;\r\n                case 'narrow_category':\r\n                    data = {\r\n                        narrow_category: formState.narrow_category,\r\n                        broad_category_id: formState.broad_category_id,\r\n                        has_person: formState.has_person\r\n                    }\r\n                    if (!data.narrow_category || !data.broad_category_id) {\r\n                        throw new Error(\"Empty Input\")\r\n                    }\r\n                    break;\r\n            }\r\n            await API.addCategories(Auth.token, data)\r\n            setAlertState({\r\n                severity: \"success\",\r\n                message: \"Category Added!\",\r\n                open: true\r\n            })\r\n            let updatedCategories = await API.getCategories(Auth.token)\r\n            props.setCategories(updatedCategories);\r\n\r\n        } catch (err) {\r\n            switch (err.message) {\r\n                case \"Error! 500\":\r\n                    setAlertState({\r\n                        severity: \"error\",\r\n                        message: \"Server Error!\",\r\n                        open: true\r\n                    })\r\n                    break;\r\n                case \"Unauthorized\":\r\n                    setAuth({ type: 'LOGOUT' })\r\n                    break;\r\n                case \"Empty Input\":\r\n                    setAlertState({\r\n                        severity: \"error\",\r\n                        message: \"Please fill out all fields\",\r\n                        open: true\r\n                    })\r\n                    break;\r\n                default:\r\n                    setAlertState({\r\n                        severity: \"error\",\r\n                        message: \"You must be connected to the internet to add categories\",\r\n                        open: true\r\n                    })\r\n            }\r\n        } finally {\r\n            props.setOpenBackdrop(false)\r\n            setFormState(initialFormState)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <DialogContent>\r\n            <IconButton onClick={() => props.handleClose()} className={props.classes.close}><CloseIcon /></IconButton>\r\n            <Card className={props.classes.card}>\r\n                <CardContent>\r\n\r\n                    <Typography variant=\"h5\" component=\"h5\" className={props.classes.root}>Add a Person</Typography>\r\n                    <form className={props.classes.root} onSubmit={(e: React.SyntheticEvent) => handleFormSubmit(e, 'person')}>\r\n                        <TextField\r\n                            onChange={handleFormChange}\r\n                            value={formState.person}\r\n                            label=\"Person\"\r\n                            name=\"person\"\r\n                            type=\"string\"\r\n                        />\r\n                        <Button\r\n                            type=\"submit\"\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                        >Add</Button>\r\n                    </form>\r\n                </CardContent>\r\n            </Card>\r\n            <Card className={props.classes.card}>\r\n                <CardContent>\r\n                    <Typography variant=\"h5\" component=\"h5\" className={props.classes.root}>Add a Broad Category</Typography>\r\n                    <form className={props.classes.root} onSubmit={(e: React.SyntheticEvent) => handleFormSubmit(e, 'broad_category')}>\r\n                        <TextField\r\n                            onChange={handleFormChange}\r\n                            value={formState.broad_category}\r\n                            label=\"Broad Category\"\r\n                            name=\"broad_category\"\r\n                            type=\"string\"\r\n                        />\r\n                        <FormControlLabel control={<Checkbox\r\n                            checked={formState.has_person}\r\n                            onChange={handleFormChange}\r\n                            name=\"has_person\"\r\n                            inputProps={{ 'aria-label': 'primary checkbox' }}\r\n                        />}\r\n                            label=\"Person\"\r\n                        />\r\n                        <Button\r\n                            type=\"submit\"\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                        >Add</Button>\r\n                    </form>\r\n                </CardContent>\r\n            </Card>\r\n            <Card className={props.classes.card}>\r\n                <CardContent>\r\n                    <Typography variant=\"h5\" component=\"h5\" className={props.classes.root}>Add a Narrow Category</Typography>\r\n                    <form className={props.classes.root} onSubmit={(e: React.SyntheticEvent) => handleFormSubmit(e, 'narrow_category')}>\r\n                        <FormControl\r\n                            className={props.classes.formControl}>\r\n                            <InputLabel htmlFor=\"broad_category\">Broad Category</InputLabel>\r\n                            <Select\r\n                                onChange={handleFormChange}\r\n                                name=\"broad_category_id\"\r\n                                labelId=\"broad_category_id\"\r\n                                label=\"Broad Category\"\r\n                            >\r\n                                {props.categories.broad_categories.map(i => (\r\n                                    <MenuItem value={i.id}>{i.name}</MenuItem>\r\n                                ))}\r\n                            </Select>\r\n                        </FormControl>\r\n                        <TextField\r\n                            onChange={handleFormChange}\r\n                            value={formState.narrow_category}\r\n                            label=\"Narrow Category\"\r\n                            name=\"narrow_category\"\r\n                            type=\"string\"\r\n                        />\r\n                        <Button\r\n                            type=\"submit\"\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                        >Add</Button>\r\n                    </form>\r\n                </CardContent>\r\n            </Card>\r\n        </DialogContent>\r\n    )\r\n}","import React, { useState, useEffect, useReducer } from 'react';\r\nimport ReportTable from '../components/Table';\r\nimport AddExpensesForm from '../components/AddExpensesForm'\r\nimport AddIncomeForm from '../components/AddIncomeForm'\r\nimport API from '../utils/API'\r\nimport { createStyles, makeStyles, Theme, useTheme } from '@material-ui/core/styles';\r\nimport { AuthContext } from '../App'\r\nimport type {\r\n    TableDataEntry,\r\n    DataListStateType,\r\n    AllDataListsType,\r\n    FormStateType,\r\n    InputName,\r\n    ChartJSDataType,\r\n    WallChartDataType\r\n} from '../interfaces/Interfaces'\r\nimport {\r\n    AppBar,\r\n    Button,\r\n    Container,\r\n    Dialog,\r\n    Box\r\n} from '@material-ui/core';\r\nimport SpeedDial from '@material-ui/lab/SpeedDial';\r\nimport SpeedDialIcon from '@material-ui/lab/SpeedDialIcon';\r\nimport SpeedDialAction from '@material-ui/lab/SpeedDialAction';\r\nimport AddIcon from '@material-ui/icons/Add'\r\nimport {\r\n    emptyDatabase,\r\n    saveCategories,\r\n    loadCategories,\r\n    saveWallChartData,\r\n    loadWallChartData\r\n} from '../utils/db';\r\n\r\nimport PivotTable from '../components/PivotTable';\r\nimport Form from '../components/Form';\r\nimport WallChart from '../components/Chart'\r\nimport Edit from '../components/Edit';\r\n\r\nfunction Home() {\r\n    const theme = useTheme();\r\n\r\n    const { Auth, setAuth, setAlertState, setOpenBackdrop } = React.useContext(AuthContext)\r\n\r\n    // Form control state\r\n    const [formState, setFormState] = useState<FormStateType>(\r\n        {\r\n            form: \"expenses\",\r\n            year: new Date(Date.now()).getUTCFullYear(),\r\n            month: new Date(Date.now()).getUTCMonth() + 1\r\n        }\r\n    )\r\n\r\n    const [incomeTableState, setIncomeTableState] = useState<{ schema: { fields: [] }, data: TableDataEntry[] }>(\r\n        {\r\n            schema: { fields: [] },\r\n            data: [{\r\n                amount: \"\",\r\n                date: \"\",\r\n                source: \"\",\r\n                person: \"\",\r\n                id: NaN,\r\n                person_id: NaN\r\n            }]\r\n        }\r\n    )\r\n\r\n    const [expensesTableState, setExpensesTableState] = useState<{ schema: { fields: [] }, data: TableDataEntry[] }>(\r\n        {\r\n            schema: { fields: [] },\r\n            data: [{\r\n                amount: \"\",\r\n                date: \"\",\r\n                source: \"\",\r\n                vendor: \"\",\r\n                broad_category: \"\",\r\n                narrow_category: \"\",\r\n                person: \"\",\r\n                notes: \"\",\r\n                id: NaN\r\n            }]\r\n        }\r\n\r\n    )\r\n\r\n    // State for datalists\r\n    const [categoriesState, setCategoriesState] = useState<AllDataListsType>({\r\n        persons: [],\r\n        narrow_categories: [],\r\n        broad_categories: [],\r\n    })\r\n\r\n    // State For WallChart\r\n    function reducer(state: ChartJSDataType, action: WallChartDataType): ChartJSDataType {\r\n        if (action.labels.length > 0) {\r\n            state = {\r\n                labels: action.labels,\r\n                datasets: [\r\n                    {\r\n                        label: \"Income\",\r\n                        data: action.income,\r\n                        fill: false,\r\n                        borderColor: theme.palette.primary.main\r\n                    },\r\n                    {\r\n                        label: \"Expenses\",\r\n                        data: action.expenses,\r\n                        fill: false,\r\n                        borderColor: theme.palette.secondary.main\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n        return state\r\n    }\r\n\r\n    const [wallChartData, setWallChartData] = useReducer(reducer, {\r\n        labels: [],\r\n        datasets: [\r\n            {\r\n                label: \"Income\",\r\n                data: [],\r\n                fill: false,\r\n                borderColor: theme.palette.primary.main\r\n            },\r\n            {\r\n                label: \"Expenses\",\r\n                data: [],\r\n                fill: false,\r\n                borderColor: theme.palette.secondary.main\r\n            }\r\n        ]\r\n    })\r\n\r\n    // Converts dates to human-readable format\r\n    function formatDates(entry: TableDataEntry): TableDataEntry {\r\n        if (!entry.date) {\r\n            return entry\r\n        } else {\r\n            let date = new Date(entry.date);\r\n            let year = date.getUTCFullYear();\r\n            let month = (1 + date.getUTCMonth()).toString();\r\n            month = month.length > 1 ? month : '0' + month;\r\n            let day = date.getUTCDate().toString();\r\n            day = day.length > 1 ? day : '0' + day;\r\n            let dateString = month + '/' + day + '/' + year;\r\n            entry.date = dateString\r\n            return entry\r\n        }\r\n    }\r\n\r\n    // Form control\r\n    function handleFormChange(event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | { name?: string; value: unknown }> | React.ChangeEvent<HTMLSelectElement>): void {\r\n        let name = event.target.name as keyof typeof formState\r\n        setFormState({ ...formState, [name]: event.target.value })\r\n    }\r\n\r\n    async function handleFormSubmit(event: React.SyntheticEvent): Promise<any> {\r\n        try {\r\n            event.preventDefault()\r\n            let route = formState.form\r\n            setOpenBackdrop(true)\r\n            let response = await API[route](Auth.token, formState)\r\n            setOpenBackdrop(false)\r\n            // Formatting the dates the hard way because javascript doesn't support strftime...\r\n            if (route !== 'pivot') {\r\n                response.data = response.data.map(formatDates)\r\n            }\r\n            switch (route) {\r\n                case \"expenses\":\r\n                    setExpensesTableState(response)\r\n                    break;\r\n                case \"income\":\r\n                    setIncomeTableState(response)\r\n                    break;\r\n                case \"pivot\":\r\n                    setExpensesTableState(response)\r\n                    break;\r\n            }\r\n        } catch (err) {\r\n            if (err.message === \"Unauthorized\") {\r\n                setAuth({ type: 'LOGOUT' })\r\n            }\r\n            setOpenBackdrop(false)\r\n            setAlertState({\r\n                severity: \"error\",\r\n                message: \"Error Fetching Data\",\r\n                open: true\r\n            })\r\n        }\r\n    }\r\n\r\n    // Helper function for assigning an id to a TableDataEntry if user input matches an existing record\r\n    function assignId(\r\n        name: InputName,\r\n        value: string) {\r\n\r\n        let state;\r\n        let id;\r\n\r\n        switch (name) {\r\n            case \"person\":\r\n                state = categoriesState.persons;\r\n                id = 'person_id';\r\n                break;\r\n            case \"broad_category\":\r\n                state = categoriesState.broad_categories;\r\n                id = 'broad_category_id';\r\n                break;\r\n            case \"narrow_category\":\r\n                state = categoriesState.narrow_categories;\r\n                id = 'narrow_category_id';\r\n                break;\r\n        }\r\n        let dataListItem = state.filter((i: DataListStateType) => i.name === value)[0]\r\n        if (dataListItem) {\r\n            return { id: id, dataListItem: dataListItem }\r\n        } else {\r\n            return { id: null, dataListItem: null }\r\n        }\r\n    }\r\n\r\n    // Keep global state synced with InputRow state\r\n    async function handleExpensesChange(event: React.ChangeEvent<HTMLInputElement>, index: number): Promise<void> {\r\n        try {\r\n            let { name, value } = event.target;\r\n            let newExpensesTableStateData: TableDataEntry[] = [...expensesTableState.data]\r\n            let updatedRow: TableDataEntry = { ...newExpensesTableStateData[index], [name]: value }\r\n            if (name === \"person\" || name === \"broad_category\" || name === \"narrow_category\") {\r\n                let { id, dataListItem } = assignId(name as InputName, value)\r\n                if (id && dataListItem) {\r\n                    updatedRow = { ...updatedRow, [id]: dataListItem.id }\r\n                }\r\n            }\r\n            newExpensesTableStateData[index] = updatedRow\r\n            setExpensesTableState({ ...expensesTableState, data: newExpensesTableStateData })\r\n\r\n        } catch (err) {\r\n            console.error(err)\r\n            if (err.message === \"Unauthorized\") {\r\n                setAuth({ type: 'LOGOUT' })\r\n            }\r\n        }\r\n    }\r\n\r\n    // Keep global state synced with InputRow state\r\n    async function handleIncomeChange(event: React.ChangeEvent<HTMLInputElement>, index: number): Promise<void> {\r\n        try {\r\n            let { name, value } = event.target;\r\n            let newIncomeTableStateData: TableDataEntry[] = [...incomeTableState.data]\r\n            let updatedRow: TableDataEntry = { ...newIncomeTableStateData[index], [name]: value }\r\n            if (name === \"person\") {\r\n                let { id, dataListItem } = assignId(name as InputName, value)\r\n                if (id && dataListItem) {\r\n                    updatedRow = { ...updatedRow, [id]: dataListItem.id }\r\n                }\r\n            }\r\n            newIncomeTableStateData[index] = updatedRow\r\n            setIncomeTableState({ ...incomeTableState, data: newIncomeTableStateData })\r\n        } catch (err) {\r\n            console.error(err)\r\n        }\r\n    }\r\n\r\n    // Update an expense row altered by the user\r\n    async function updateExpensesRow(index: number): Promise<void> {\r\n        try {\r\n            await API.updateExpenses(Auth.token, expensesTableState.data[index])\r\n            setAlertState({\r\n                severity: \"success\",\r\n                message: \"Record updated!\",\r\n                open: true\r\n            })\r\n            reloadWallChartData()\r\n        } catch (err) {\r\n            console.log(err)\r\n            setAlertState({\r\n                severity: \"error\",\r\n                message: \"Error: Failed to save!\",\r\n                open: true\r\n            })\r\n        }\r\n    }\r\n\r\n    // Update an income row altered by the user\r\n    async function updateIncomeRow(index: number): Promise<void> {\r\n        try {\r\n            await API.updateIncome(Auth.token, incomeTableState.data[index])\r\n            setAlertState({\r\n                severity: \"success\",\r\n                message: \"Record updated!\",\r\n                open: true\r\n            })\r\n            reloadWallChartData()\r\n        } catch (err) {\r\n            setAlertState({\r\n                severity: \"error\",\r\n                message: \"Error: Failed to save!\",\r\n                open: true\r\n            })\r\n        }\r\n    }\r\n\r\n    // Reload data for Wallchart\r\n    async function reloadWallChartData(): Promise<void> {\r\n        let data;\r\n        try {\r\n            data = await API.wallchart(Auth.token)\r\n            setWallChartData(data)\r\n            saveWallChartData(data)\r\n        } catch (err) {\r\n            if (err.message === \"No Data\") {\r\n                console.log(\"No Data!\")\r\n            } else {\r\n                data = await loadWallChartData()\r\n                setWallChartData(data)\r\n            }\r\n        }\r\n    }\r\n\r\n    // Delete a row from the database\r\n    async function deleteEntry(id: number | undefined) {\r\n        try {\r\n            if (formState.form === \"expenses\") {\r\n                await API.deleteExpenses(Auth.token, id);\r\n                let newExpensesTableStateData = expensesTableState.data.filter(entry => entry.id !== id)\r\n                setExpensesTableState({ ...expensesTableState, data: newExpensesTableStateData })\r\n            } else if (formState.form === \"income\") {\r\n                await API.deleteIncome(Auth.token, id);\r\n                let newIncomeTableStateData = incomeTableState.data.filter(entry => entry.id !== id)\r\n                setIncomeTableState({ ...incomeTableState, data: newIncomeTableStateData })\r\n            }\r\n            reloadWallChartData()\r\n        } catch (err) {\r\n            console.error(err)\r\n            if (err === 'Unauthorized') {\r\n                setAuth({ type: 'LOGOUT' })\r\n            }\r\n        }\r\n    }\r\n\r\n    // Create classes to use for styling\r\n    const useStyles = makeStyles((theme: Theme) =>\r\n        createStyles({\r\n            formControl: {\r\n                margin: theme.spacing(1),\r\n                minWidth: '10em'\r\n            },\r\n            selectEmpty: {\r\n                marginTop: theme.spacing(2),\r\n            },\r\n            root: {\r\n                display: 'flex',\r\n                justifyContent: 'center',\r\n                flexWrap: 'wrap',\r\n                [theme.breakpoints.up('md')]: {\r\n                    flexWrap: 'noWrap',\r\n                },\r\n                '& > *': {\r\n                    margin: theme.spacing(1),\r\n                    [theme.breakpoints.down('xs')]: {\r\n                        width: '100%',\r\n                    },\r\n                },\r\n            },\r\n            wallchart: {\r\n                width: '100%'\r\n            },\r\n            logoutBtn: {\r\n                float: 'right',\r\n                margin: '1em',\r\n            },\r\n            editBtn: {\r\n                float: 'left',\r\n                margin: '1em',\r\n            },\r\n            offline: {\r\n                backgroundColor: theme.palette.secondary.main,\r\n                color: 'white',\r\n                textAlign: 'center',\r\n                position: 'sticky'\r\n            },\r\n            speedDial: {\r\n                position: 'fixed',\r\n                bottom: theme.spacing(2),\r\n                right: theme.spacing(2),\r\n            },\r\n            dialog: {\r\n                width: '100%',\r\n            },\r\n            datePicker: {\r\n                [theme.breakpoints.down('sm')]: {\r\n                    marginLeft: '-10px'\r\n                },\r\n            },\r\n            card: {\r\n                margin: '1em 0'\r\n            },\r\n            close: {\r\n                position: 'absolute',\r\n                right: '0',\r\n                top: '0'\r\n            }\r\n        })\r\n    );\r\n    const classes = useStyles();\r\n\r\n    // SpeedDial controls\r\n    const [speedDialOpen, setSpeedDialOpen] = React.useState(false);\r\n\r\n    const actions = [\r\n        { icon: <AddIcon />, name: 'Expenses', action: handleExpensesOpen, operation: 'product' },\r\n        { icon: <AddIcon />, name: 'Income', action: handleIncomeOpen, operation: 'tag' }\r\n    ]\r\n\r\n    const handleSpeedDialClose = () => {\r\n        setSpeedDialOpen(false);\r\n    };\r\n\r\n    const handleOpen = () => {\r\n        setSpeedDialOpen(true);\r\n    };\r\n\r\n    function handleExpensesOpen(): void {\r\n        setAddExpensesOpen(true)\r\n        setSpeedDialOpen(false)\r\n    }\r\n\r\n    function handleIncomeOpen(): void {\r\n        setAddIncomeOpen(true)\r\n        setSpeedDialOpen(false)\r\n    }\r\n\r\n    // Controls for Dialogs\r\n    const [addExpensesOpen, setAddExpensesOpen] = useState(false)\r\n    const [addIncomeOpen, setAddIncomeOpen] = useState(false)\r\n    const [editOpen, setEditOpen] = useState(false)\r\n    function handleClose() {\r\n        setAddExpensesOpen(false)\r\n        setAddIncomeOpen(false)\r\n        setEditOpen(false)\r\n    }\r\n\r\n    // Control display of Offline banner\r\n    const [offline, setOffline] = useState<boolean>(false)\r\n    window.addEventListener(\"offline\", () => setOffline(true))\r\n    window.addEventListener(\"online\", () => setOffline(false))\r\n\r\n    useEffect(() => {\r\n        async function getCategories(): Promise<void> {\r\n            try {\r\n                let categories = await API.getCategories(Auth.token)\r\n                setCategoriesState(categories)\r\n                saveCategories(categories)\r\n            } catch (err) {\r\n                let categories = await loadCategories()\r\n                setCategoriesState(categories)\r\n            }\r\n        }\r\n        getCategories()\r\n        reloadWallChartData()\r\n        if (!navigator.onLine) {\r\n            setOffline(true)\r\n        }\r\n    }, [Auth.token])\r\n\r\n    return (\r\n        <Box component='div' className=\"Home\">\r\n            {offline ? (\r\n                <AppBar className={classes.offline} position='sticky'>\r\n                    Offline\r\n                </AppBar>\r\n            ) : null}\r\n            <Box component='header' className=\"header\">\r\n                <Button\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    className={classes.editBtn}\r\n                    onClick={() => setEditOpen(true)}\r\n                >Edit\r\n                </Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    className={classes.logoutBtn}\r\n                    onClick={async () => {\r\n                        setAuth({ type: 'LOGOUT' })\r\n                        let res = await emptyDatabase()\r\n                        console.log(res)\r\n                    }}\r\n                >Logout\r\n                </Button>\r\n                <Container className={classes.root}>\r\n                    <h1 style={{ textAlign: 'center', textTransform: 'capitalize' }}>{Auth.user}'s Finances</h1>\r\n                </Container>\r\n                <WallChart data={wallChartData} />\r\n                <Form\r\n                    classes={classes}\r\n                    handleFormSubmit={handleFormSubmit}\r\n                    handleFormChange={handleFormChange}\r\n                    formState={formState}\r\n                />\r\n            </Box>\r\n            <div className=\"body\">\r\n                {formState.form === \"income\" && incomeTableState.data[0]?.id ? (\r\n                    <ReportTable\r\n                        state={incomeTableState}\r\n                        dataLists={categoriesState}\r\n                        handleChange={handleIncomeChange}\r\n                        handleUpdate={updateIncomeRow}\r\n                        deleteEntry={deleteEntry}\r\n                        form={formState.form}\r\n                    />\r\n                ) : null}\r\n                {formState.form === \"expenses\" && expensesTableState.data[0]?.id ? (\r\n                    <ReportTable\r\n                        state={expensesTableState}\r\n                        dataLists={categoriesState}\r\n                        handleChange={handleExpensesChange}\r\n                        handleUpdate={updateExpensesRow}\r\n                        deleteEntry={deleteEntry}\r\n                        form={formState.form}\r\n                    />\r\n                ) : null}\r\n                {formState.form === \"pivot\" && expensesTableState.data[0]?.id ? (\r\n                    <PivotTable state={expensesTableState} />\r\n                ) : null}\r\n            </div>\r\n            <Dialog onClose={handleClose} open={editOpen} maxWidth='xl'>\r\n                <Edit\r\n                    classes={classes}\r\n                    handleClose={handleClose}\r\n                    categories={categoriesState}\r\n                    setCategories={setCategoriesState}\r\n                    setOpenBackdrop={setOpenBackdrop}\r\n                />\r\n            </Dialog>\r\n            <Dialog onClose={handleClose} open={addExpensesOpen} maxWidth='xl'>\r\n                <AddExpensesForm\r\n                    classes={classes}\r\n                    handleClose={handleClose}\r\n                    categories={categoriesState}\r\n                    setOpenBackdrop={setOpenBackdrop}\r\n                    reloadWallChart={reloadWallChartData}\r\n                />\r\n            </Dialog>\r\n            <Dialog onClose={handleClose} open={addIncomeOpen} maxWidth='xl'>\r\n                <AddIncomeForm\r\n                    classes={classes}\r\n                    handleClose={handleClose}\r\n                    categories={categoriesState}\r\n                    setOpenBackdrop={setOpenBackdrop}\r\n                    reloadWallChart={reloadWallChartData}\r\n                />\r\n            </Dialog>\r\n            <SpeedDial\r\n                ariaLabel=\"SpeedDial\"\r\n                className={classes.speedDial}\r\n                icon={<SpeedDialIcon />}\r\n                onClose={handleSpeedDialClose}\r\n                onOpen={handleOpen}\r\n                open={speedDialOpen}\r\n                onMouseLeave={() => { }}\r\n            >\r\n                {actions.map((action) => (\r\n                    <SpeedDialAction\r\n                        key={action.name}\r\n                        icon={action.icon}\r\n                        tooltipTitle={action.name}\r\n                        tooltipOpen\r\n                        onClick={action.action}\r\n                    />\r\n                ))}\r\n            </SpeedDial>\r\n\r\n        </Box >\r\n    );\r\n}\r\n\r\nexport default Home;","import React, { useState } from 'react'\r\nimport API from '../utils/API'\r\nimport { AuthContext } from '../App'\r\nimport { Button, DialogContent, TextField, Typography } from '@material-ui/core';\r\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles'\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            flexWrap: 'wrap',\r\n            '& > *': {\r\n                margin: theme.spacing(1),\r\n                [theme.breakpoints.down('xs')]: {\r\n                    width: '100%',\r\n                },\r\n            }\r\n        },\r\n        heading: {\r\n            textAlign: 'center',\r\n            fontFamily: 'Times New Roman, serif'\r\n        },\r\n    })\r\n);\r\n\r\nexport default function Signup({handleClose}: {handleClose: Function}) {\r\n    const { setAlertState, setOpenBackdrop } = React.useContext(AuthContext)\r\n\r\n    const [signupFormState, setSignupFormState] = useState({\r\n        username: \"\",\r\n        password: \"\",\r\n    });\r\n\r\n    const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = event.target;\r\n        setSignupFormState({\r\n            ...signupFormState,\r\n            [name]: value,\r\n        });\r\n    };\r\n\r\n    const formSubmit = async (event: React.SyntheticEvent) => {\r\n        event.preventDefault();\r\n        setOpenBackdrop(true)\r\n        try {\r\n            await API.signup(signupFormState)\r\n            setAlertState({\r\n                severity: \"success\",\r\n                message: \"You're signed up! Please log in\",\r\n                open: true\r\n            })\r\n            handleClose()\r\n        } catch (err) {\r\n            console.error(err)\r\n            setAlertState({\r\n                severity: \"error\",\r\n                message: \"Error Signing Up!\",\r\n                open: true\r\n            })\r\n        } finally {\r\n            setOpenBackdrop(false)\r\n        }\r\n    }\r\n\r\n    const classes = useStyles()\r\n\r\n    return (\r\n        <DialogContent>\r\n            <div style={{ textAlign: 'center' }}>\r\n            <Typography variant=\"h2\" component=\"h4\" className={classes.heading}>Sign Up</Typography>\r\n                <form className={classes.root} onSubmit={formSubmit}>\r\n                    <TextField\r\n                        onChange={handleChange}\r\n                        value={signupFormState.username}\r\n                        type=\"text\"\r\n                        name=\"username\"\r\n                        label=\"username\"\r\n                        variant=\"outlined\"\r\n                    />\r\n                    <TextField\r\n                        onChange={handleChange}\r\n                        value={signupFormState.password}\r\n                        type=\"password\"\r\n                        name=\"password\"\r\n                        label=\"password\"\r\n                        variant=\"outlined\"\r\n                    />\r\n                    <Button variant=\"contained\" color=\"primary\" name=\"signup\" type=\"submit\">Sign Up</Button>\r\n                </form>\r\n            </div>\r\n        </DialogContent>\r\n    );\r\n}","import React, { useState } from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\nimport API from '../utils/API'\r\nimport { AuthContext } from '../App'\r\nimport { Button, TextField, Dialog, Typography } from '@material-ui/core';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles'\r\nimport Signup from '../components/Signup'\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            flexGrow: 1\r\n        },\r\n        heading: {\r\n            textAlign: 'center',\r\n            fontFamily: 'Times New Roman, serif'\r\n        },\r\n        signupBtn: {\r\n            float: 'right',\r\n            margin: '1em',\r\n        },\r\n        sidebar: {\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            textAlign: 'center',\r\n            flexWrap: 'wrap',\r\n        },\r\n        form: {\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            textAlign: 'center',\r\n            flexWrap: 'wrap',\r\n            '& > *': {\r\n                margin: theme.spacing(1),\r\n                display: 'flex',\r\n                justifyContent: 'center',\r\n                textAlign: 'center',\r\n                flexWrap: 'wrap',\r\n                [theme.breakpoints.down('xs')]: {\r\n                    width: '100%',\r\n                },\r\n            }\r\n        },\r\n        link: {\r\n            color: theme.palette.primary.main,\r\n            '&:hover': theme.palette.secondary.main \r\n        }\r\n    })\r\n);\r\n\r\nexport default function Login() {\r\n    const { Auth, setAuth, setAlertState, setOpenBackdrop } = React.useContext(AuthContext)\r\n\r\n    const [loginFormState, setLoginFormState] = useState({\r\n        username: \"\",\r\n        password: \"\",\r\n    });\r\n\r\n    const [signupOpen, setSignupOpen] = useState<boolean>(false)\r\n\r\n    const inputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = event.target;\r\n        setLoginFormState({\r\n            ...loginFormState,\r\n            [name]: value,\r\n        });\r\n    };\r\n\r\n    const formSubmit = async (event: React.SyntheticEvent) => {\r\n        event.preventDefault();\r\n        setOpenBackdrop(true)\r\n        try {\r\n            let newToken = await API.login(loginFormState)\r\n            setAuth({ type: 'LOGIN', payload: { user: loginFormState.username, token: newToken.token } })\r\n        } catch (err) {\r\n            console.error(err)\r\n            setAlertState({\r\n                severity: \"error\",\r\n                message: \"Incorrect username or password\",\r\n                open: true\r\n            })\r\n        } finally {\r\n            setOpenBackdrop(false)\r\n        }\r\n    }\r\n\r\n    const classes = useStyles()\r\n\r\n    function handleClose() {\r\n        setSignupOpen(false)\r\n    }\r\n\r\n    if (Auth.loggedIn) {\r\n        return <Redirect to='/' />\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Grid container className={classes.root}>\r\n                <Grid item xs={12}>\r\n                    <Typography variant=\"h1\" component=\"h2\" gutterBottom className={classes.heading}>\r\n                        Flask of Finances\r\n                    </Typography>\r\n                </Grid>\r\n                <Grid item xs={12} className={classes.sidebar}>\r\n                    <form className={classes.form} onSubmit={formSubmit}>\r\n                        <TextField\r\n                            onChange={inputChange}\r\n                            value={loginFormState.username}\r\n                            type=\"text\"\r\n                            name=\"username\"\r\n                            label=\"username\"\r\n                            variant=\"outlined\"\r\n                        />\r\n                        <TextField\r\n                            onChange={inputChange}\r\n                            value={loginFormState.password}\r\n                            type=\"password\"\r\n                            name=\"password\"\r\n                            label=\"password\"\r\n                            variant=\"outlined\"\r\n                        />\r\n                        <Button variant=\"contained\" color=\"primary\" name=\"login\" type=\"submit\">Login</Button>\r\n                            </form>\r\n                            </Grid>\r\n                        <Grid item xs={12} className={classes.sidebar}>\r\n\r\n            <Button\r\n                className={classes.link}\r\n                onClick={() => setSignupOpen(true)}\r\n            >Sign Up</Button>\r\n            </Grid>\r\n            </Grid>\r\n            <Dialog onClose={handleClose} open={signupOpen} maxWidth='xl'>\r\n                <Signup handleClose={handleClose} />\r\n            </Dialog>\r\n        </>\r\n    );\r\n}","import React from 'react';\r\nimport MuiAlert, { AlertProps } from '@material-ui/lab/Alert';\r\n\r\nexport default function Alert(props: AlertProps) {\r\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\r\n}","import React from 'react';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport Alert from './Alert'\r\nimport { makeStyles, Theme } from '@material-ui/core/styles';\r\nimport { AlertStateType } from '../interfaces/Interfaces';\r\n\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n    snackbar: {\r\n        width: '100%',\r\n        '& > * + *': {\r\n            marginTop: theme.spacing(2),\r\n        },\r\n    },\r\n}));\r\n\r\nexport default function CustomizedSnackbar({ state, setState }: {\r\n    state: AlertStateType,\r\n    setState: React.Dispatch<React.SetStateAction<AlertStateType>>\r\n    }) {\r\n\r\n    const classes = useStyles();\r\n\r\n    const handleClose = (event?: React.SyntheticEvent, reason?: string) => {\r\n        if (reason === 'clickaway') {\r\n            return;\r\n        }\r\n        setState({ ...state, open: false });\r\n    };\r\n\r\n    return (\r\n        <div className={classes.snackbar}>\r\n            <Snackbar\r\n                open={state.open}\r\n                autoHideDuration={3000}\r\n                onClose={handleClose}\r\n\r\n            >\r\n                <Alert onClose={handleClose} severity={state.severity}>\r\n                    {state.message}\r\n                </Alert>\r\n            </Snackbar>\r\n        </div>\r\n    );\r\n}","import React, { useEffect, useState, useReducer } from 'react'\nimport { BrowserRouter as Router, Route, Redirect, RouteComponentProps } from 'react-router-dom'\nimport Home from './pages/Home'\nimport Login from './pages/Login'\nimport API from './utils/API'\nimport { testDatabase } from './utils/db'\nimport './App.css';\nimport CustomizedSnackbar from './components/SnackBar'\nimport { AlertStateType, Auth, ContextState } from './interfaces/Interfaces'\nimport { ThemeProvider, createMuiTheme, Theme, makeStyles, createStyles } from '@material-ui/core/styles';\nimport { green, blueGrey, purple } from '@material-ui/core/colors'\nimport { MuiPickersOverrides } from '@material-ui/pickers/typings/overrides';\nimport {\n  CssBaseline,\n  ThemeOptions,\n  Backdrop,\n  CircularProgress,\n} from '@material-ui/core'\n\n// Types to allow for theme customization\ntype overridesNameToClassKey = {\n  [P in keyof MuiPickersOverrides]: keyof MuiPickersOverrides[P];\n};\ntype CustomType = {\n  MuiPickersBasePicker: {\n    pickerView: {\n      maxWidth?: string;\n    };\n  };\n};\ndeclare module '@material-ui/core/styles/overrides' {\n  interface ComponentNameToClassKey extends overridesNameToClassKey { }\n  export interface ComponentNameToClassKey extends CustomType { }\n};\n\n// Instantiating default theme to use breakpoints\nconst defaultTheme = createMuiTheme();\n\n// Theme factory\nfunction createMyTheme(options: ThemeOptions) {\n  return createMuiTheme({\n    overrides: {\n      MuiPickersBasePicker: {\n        container: {\n          backgroundColor: blueGrey[900],\n          [defaultTheme.breakpoints.down(\"xs\")]: {\n            marginLeft: '-10px',\n          }\n        },\n      },\n      MuiCard: {\n        root: {\n          backgroundColor: blueGrey[900]\n        }\n      },\n      MuiDialogContent: {\n        root: {\n          backgroundColor: blueGrey[900]\n        }\n      },\n      MuiPickersCalendarHeader: {\n        iconButton: {\n          backgroundColor: blueGrey[900]\n        }\n      }\n    },\n    ...options\n  })\n};\n\n// Adding global palette colors\nconst theme = createMyTheme({\n  palette: {\n    type: 'dark',\n    background: {\n      default: blueGrey[900],\n    },\n    primary: {\n      main: green[900]\n    },\n    secondary: {\n      main: purple[800]\n    }\n  },\n});\n\n\n\n// Check if user is logged in before returning protected component/page\nconst ProtectedRoute = ({ component: Component, loggedIn, ...rest }: {\n  path: string,\n  loggedIn: boolean,\n  setLoggedIn: Function,\n  component: React.FunctionComponent<RouteComponentProps>,\n}): JSX.Element => (\n  <Route {...rest} render={props => (\n    loggedIn\n      ? <Component {...props} />\n      : <Redirect to='/login' />\n  )\n  } />\n\n)\n\nexport const AuthContext = React.createContext<ContextState>({\n  Auth: {\n    loggedIn: false,\n    user: \"\",\n    token: \"\"\n  },\n  setAuth: (): void => { },\n  setAlertState: (): void => { },\n  setOpenBackdrop: (): void => { }\n})\n\nexport default function App() {\n\n  const useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n      backdrop: {\n        zIndex: 1301, // To be in front of Dialog at 1300\n        color: '#fff',\n      },\n    })\n  )\n\n  const classes = useStyles();\n  // Reducer state for Authentication values\n  const reducer = (state: Auth, action: { type: string, payload?: { user: string, token: string } }): Auth => {\n    if (action.type === 'LOGIN' && action.payload) {\n      localStorage.setItem(\"user\", action.payload.user);\n      localStorage.setItem(\"token\", action.payload.token);\n      return {\n        ...state,\n        loggedIn: true,\n        user: action.payload.user,\n        token: action.payload.token\n      };\n    } else if (action.type === 'LOGOUT') {\n      localStorage.clear();\n      return {\n        ...state,\n        loggedIn: false,\n        user: \"\",\n        token: \"\",\n      };\n    } else {\n      return state;\n    }\n  };\n\n  const [Auth, setAuth] = useReducer(reducer, {\n    loggedIn: false,\n    user: \"\",\n    token: \"\"\n  })\n\n  // State for alert snackbars\n  const [alertState, setAlertState] = useState<AlertStateType>({\n    severity: undefined,\n    message: \"\",\n    open: false,\n  })\n\n  // Loading Backdrop display state\n  const [openBackdrop, setOpenBackdrop] = useState<boolean>(false);\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\")\n    const user = localStorage.getItem(\"user\")\n    if (token) {\n      API.checkAuth(token)\n        .then(res => setAuth({ type: 'LOGIN', payload: { user: res.username, token: token } }))\n        .catch(err => {\n          if (err.message === \"Unauthorized\") {\n            setAuth({ type: 'LOGOUT' })\n          } else {\n            setAuth({ type: 'LOGIN', payload: { user: user || \"\", token: token || \"\" } })\n          }\n        })\n    }\n  }, [])\n\n\n\n  useEffect(() => {\n    testDatabase()\n  })\n\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <AuthContext.Provider\n        value={{ Auth, setAuth, setAlertState, setOpenBackdrop }}\n      >\n        <Router>\n          <ProtectedRoute path=\"/\"\n            loggedIn={Auth.loggedIn}\n            setLoggedIn={setAuth}\n            component={Home}\n          />\n          <Route exact path=\"/login\">\n            <Login />\n          </Route>\n        </Router>\n        <CustomizedSnackbar\n          state={alertState}\n          setState={setAlertState}\n        />\n        <Backdrop className={classes.backdrop} open={openBackdrop}>\n          <CircularProgress disableShrink color=\"inherit\" />\n        </Backdrop>\n      </AuthContext.Provider>\n    </ThemeProvider>\n  )\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);  \n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n}\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  // <React.StrictMode>\n    <App />,\n  // </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}