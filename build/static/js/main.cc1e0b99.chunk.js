(this.webpackJsonpreact_client=this.webpackJsonpreact_client||[]).push([[0],{178:function(e,t,a){},280:function(e,t,a){},281:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),o=a.n(r),c=a(17),s=a.n(c),i=(a(178),a(146)),l=a(14),u=a(7),d=a(21),p=a(109),b=a(74),j=a(9),h=a.n(j),m=a(15),f=a(13),O=a(140),g=a.n(O),x=a(139),v=a.n(x),y=a(325),w=a(326),k=a(362),C=a(332),_=a(333),S=a(5),N=a(361),L=a(324),A=Object(S.a)((function(e){return Object(N.a)({root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default},"&:nth-of-type(even)":{backgroundColor:L.a[800]},"& input":{backgroundColor:"inherit",paddingLeft:0}}})}))(y.a);function E(e){var t=Object(r.useState)({amount:""}),a=Object(f.a)(t,2),o=a[0],c=a[1];function s(e){var t=e.target,a=t.name,n=t.value;c(Object(u.a)(Object(u.a)({},o),{},Object(l.a)({},a,n)))}function i(e,t){return Object(n.jsx)("datalist",{id:t,children:e.map((function(e){return Object(n.jsx)("option",{value:e.name},e.id)}))})}return Object(r.useEffect)((function(){c(e.entry)}),[e.entry]),Object(n.jsxs)(A,{children:[e.fields.filter((function(e){return!e.name.includes("id")})).map((function(t){var a,r,c,l,u,d;return Object(n.jsxs)(w.a,{className:e.classes,children:[Object(n.jsx)(k.a,{name:t.name,onBlur:function(t){e.handleChange(t,e.i)},onChange:s,className:"tableInput",value:o[t.name]||"",inputProps:{list:t.name},InputProps:{startAdornment:Object(n.jsx)(C.a,{position:"start",children:"amount"===t.name?"$":null}),disableUnderline:!0},style:{width:"80%"}}),"person"===t.name&&(null===(a=e.dataLists)||void 0===a?void 0:a.persons)?i(null===(r=e.dataLists)||void 0===r?void 0:r.persons,t.name):null,"narrow_category"===t.name&&(null===(c=e.dataLists)||void 0===c?void 0:c.narrow_categories)?i(null===(l=e.dataLists)||void 0===l?void 0:l.narrow_categories,t.name):null,"broad_category"===t.name&&(null===(u=e.dataLists)||void 0===u?void 0:u.broad_categories)?i(null===(d=e.dataLists)||void 0===d?void 0:d.broad_categories,t.name):null]})})),Object(n.jsx)(w.a,{className:e.classes,children:Object(n.jsx)(_.a,{color:"primary",onClick:function(){return e.handleUpdate(e.i)},children:Object(n.jsx)(v.a,{})})}),Object(n.jsx)(w.a,{className:e.classes,children:Object(n.jsx)(_.a,{"aria-label":"delete",color:"secondary",onClick:function(){return e.deleteEntry(o.id)},children:Object(n.jsx)(g.a,{})})})]})}var I=a(336),B=a(338),T=a(335),F=a(337),P=a(93),D=a(334);function U(e){var t=Object(D.a)((function(e){return Object(N.a)({table:{minWidth:650,padding:"0 1em"},tableCellHead:{backgroundColor:e.palette.primary.main,color:e.palette.common.white,padding:10,fontSize:16},tableCellBody:{fontSize:14,padding:0,maxWidth:"10ch"}})}))(),a=Object(r.createRef)();return Object(r.useEffect)((function(){a.current&&a.current.scrollIntoView({behavior:"smooth"})})),Object(n.jsx)(T.a,{component:P.a,children:Object(n.jsxs)(I.a,{className:t.table,ref:a,children:[Object(n.jsx)(F.a,{children:Object(n.jsxs)(y.a,{children:[e.state.schema.fields.filter((function(e){return!e.name.includes("id")})).map((function(e){return Object(n.jsx)(w.a,{className:t.tableCellHead,style:{textTransform:"capitalize"},children:e.name.replace("_"," ")},e.name)})),Object(n.jsx)(w.a,{className:t.tableCellHead,children:Object(n.jsx)("span",{children:"Save"})}),Object(n.jsx)(w.a,{className:t.tableCellHead,children:Object(n.jsx)("span",{children:"Delete"})})]})}),Object(n.jsx)(B.a,{className:"tableBody",children:e.state.data.map((function(a,r){return Object(n.jsx)(E,{entry:a,i:r,fields:e.state.schema.fields,handleChange:e.handleChange,handleUpdate:e.handleUpdate,dataLists:e.dataLists,deleteEntry:e.deleteEntry,classes:t.tableCellBody},r)}))})]})})}function z(e,t){if(401===e.status)throw new Error("Unauthorized");if(404===e.status)throw new Error("No Data");if(200!==e.status)throw new Error("Error! "+e.status);return"json"===t?e.json():"text"===t?e.text():e.blob()}var W,M={addCategories:function(e,t){return fetch("/api/categories/",{method:"POST",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return z(e,"text")}))},getCategories:function(e){return fetch("/api/categories/",{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return z(e,"json")}))},expenses:function(e,t){return fetch("/api/expenses/".concat(t.year,"/").concat(t.month),{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return z(e,"json")}))},postExpenses:function(e,t){return fetch("/api/expenses/",{method:"POST",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return z(e,"text")}))},postBatchExpenses:function(e,t){return fetch("/api/expenses/batch",{method:"POST",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return z(e,"text")}))},postIncome:function(e,t){return fetch("/api/income/",{method:"POST",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return z(e,"text")}))},postBatchIncome:function(e,t){return fetch("/api/income/batch",{method:"POST",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return z(e,"text")}))},deleteExpenses:function(e,t){return fetch("/api/expenses/".concat(t),{method:"DELETE",headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return z(e,"text")}))},updateExpenses:function(e,t){return fetch("/api/expenses/".concat(t.id),{method:"PUT",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return z(e,"text")}))},income:function(e,t){return fetch("/api/income/".concat(t.year,"/").concat(t.month),{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return z(e,"json")}))},updateIncome:function(e,t){return fetch("/api/income/".concat(t.id),{method:"PUT",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return z(e,"text")}))},deleteIncome:function(e,t){return fetch("/api/income/".concat(t),{method:"DELETE",headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return z(e,"text")}))},pivot:function(e,t){return fetch("/api/expenses/".concat(t.year,"/").concat(t.month),{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return z(e,"json")}))},wallchart:function(e){return fetch("/wallchart",{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return z(e,"json")}))},dataList:function(e){return fetch("/api/datalists",{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return z(e,"json")}))},signup:function(e){return fetch("/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return z(e,"text")}))},login:function(e){return fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return z(e,"json")}))},checkAuth:function(e){return fetch("/auth/checkAuth",{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return z(e,"json")}))},downloadFile:function(e,t,a,n){fetch("/api/expenses/file/".concat(a,"/").concat(n),{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return z(e,"blob")})).then((function(e){var a=window.URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.download=t,document.body.appendChild(n),n.click(),n.remove()}))}},R=a(147);function G(){return(G=Object(m.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.a)("finances",1,{upgrade:function(e){return Object(m.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.createObjectStore("expenses",{autoIncrement:!0}),e.createObjectStore("income",{autoIncrement:!0}),e.createObjectStore("broad_categories",{autoIncrement:!0}),e.createObjectStore("narrow_categories",{autoIncrement:!0}),e.createObjectStore("persons",{autoIncrement:!0}),e.createObjectStore("wallchart",{autoIncrement:!0});case 6:case"end":return t.stop()}}),t)})))()}});case 2:W=e.sent,navigator.onLine&&te();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t){return $.apply(this,arguments)}function $(){return($=Object(m.a)(h.a.mark((function e(t,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.put(t,a);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(m.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object.keys(t).forEach((function(e){var a;W.clear(e),null===(a=t[e])||void 0===a||a.forEach((function(t){W.put(e,t)}))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return K.apply(this,arguments)}function K(){return(K=Object(m.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={broad_categories:[],narrow_categories:[],persons:[]},["broad_categories","narrow_categories","persons"].map(function(){var e=Object(m.a)(h.a.mark((function e(a){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.getAll(a);case 2:n=e.sent,t[a]=n;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(m.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.clear("wallchart");case 2:W.put("wallchart",t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return Z.apply(this,arguments)}function Z(){return(Z=Object(m.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.getAll("wallchart");case 2:return t=e.sent,e.abrupt("return",t[0]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=Object(m.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.clear("expenses");case 3:return e.next=5,W.clear("income");case 5:return e.abrupt("return","pendingFinances cleared!");case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function te(){return ae.apply(this,arguments)}function ae(){return(ae=Object(m.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.prev=1,e.next=4,W.getAll("expenses");case 4:if(!((a=e.sent).length>0)){e.next=9;break}return e.next=8,M.postBatchExpenses(t,a);case 8:W.clear("expenses");case 9:return e.next=11,W.getAll("income");case 11:if(!((n=e.sent).length>0)){e.next=16;break}return e.next=15,M.postBatchIncome(t,n);case 15:W.clear("income");case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})))).apply(this,arguments)}window.addEventListener("online",te);var ne=Object(r.createContext)({Auth:{loggedIn:!1,user:"",token:""},setAuth:function(){}});function re(){return Object(r.useContext)(ne)}function oe(e){var t=Object(r.useReducer)((function(e,t){return"LOGIN"===t.type&&t.payload?(localStorage.setItem("user",t.payload.user),localStorage.setItem("token",t.payload.token),Object(u.a)(Object(u.a)({},e),{},{loggedIn:!0,user:t.payload.user,token:t.payload.token})):"LOGOUT"===t.type?(localStorage.clear(),Object(u.a)(Object(u.a)({},e),{},{loggedIn:!1,user:"",token:""})):e}),{loggedIn:!1,user:"",token:""}),a=Object(f.a)(t,2),o={Auth:a[0],setAuth:a[1]};return Object(n.jsx)(ne.Provider,{value:o,children:e.children})}var ce=a(339),se=a(151),ie=a(329),le=a(364),ue=a(357),de=a(365),pe=a(341),be=a(63),je=a.n(be),he=a(90),me=a(25),fe=a(354),Oe=Object(r.createContext)({alertState:{severity:void 0,message:"",open:!1},setAlertState:function(){},loading:!1,setLoading:function(){}});function ge(){return Object(r.useContext)(Oe)}function xe(e){var t=Object(r.useState)({severity:void 0,message:"",open:!1}),a=Object(f.a)(t,2),o=a[0],c=a[1],s=Object(r.useState)(!1),i=Object(f.a)(s,2),l={alertState:o,setAlertState:c,loading:i[0],setLoading:i[1]};return Object(n.jsx)(Oe.Provider,{value:l,children:e.children})}function ve(e){var t=re(),a=t.Auth,o=t.setAuth,c=ge().setAlertState,s={date:new Date(Date.now()),amount:NaN,person_id:NaN,broad_category_id:NaN,narrow_category_id:NaN,vendor:"",notes:""},i=Object(r.useState)(s),d=Object(f.a)(i,2),p=d[0],b=d[1],j=Object(r.useState)({name:"",id:NaN}),O=Object(f.a)(j,2),g=O[0],x=O[1],v=Object(r.useState)([]),y=Object(f.a)(v,2),w=y[0],S=y[1];function N(t){var a=t.target.name;if(b(Object(u.a)(Object(u.a)({},p),{},Object(l.a)({},a,t.target.value))),"broad_category_id"===a){var n=e.categories.broad_categories.filter((function(e){return e.id===t.target.value}))[0];x(n);var r=e.categories.narrow_categories.filter((function(e){return e.broad_category_id===n.id}));S(r)}}function L(){return(L=Object(m.a)(h.a.mark((function t(n){var r,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),p.date&&p.amount&&p.broad_category_id&&p.vendor){t.next=4;break}return c({severity:"error",message:"Please fill out all fields",open:!0}),t.abrupt("return");case 4:return(i=Object(u.a)({},p)).date=null===(r=i.date)||void 0===r?void 0:r.toLocaleDateString("en-US"),t.prev=6,e.setLoading(!0),t.next=10,M.postExpenses(a.token,i);case 10:e.setLoading(!1),c({severity:"success",message:"Record Saved!",open:!0}),e.reloadWallChart(),t.next=26;break;case 15:if(t.prev=15,t.t0=t.catch(6),e.setLoading(!1),"Error! 500"!==t.t0.message){t.next=23;break}return c({severity:"error",message:"Server Error! Contact Eli",open:!0}),t.abrupt("return");case 23:J("expenses",i),"Unauthorized"===t.t0.message&&o({type:"LOGOUT"}),c({severity:"warning",message:"Record Saved Locally",open:!0});case 26:return t.prev=26,b(s),x({name:"",id:NaN}),t.finish(26);case 30:case"end":return t.stop()}}),t,null,[[6,15,26,30]])})))).apply(this,arguments)}return Object(n.jsxs)(ce.a,{children:[Object(n.jsx)(_.a,{className:e.classes.close,onClick:function(){b(s),e.handleClose()},children:Object(n.jsx)(je.a,{})}),Object(n.jsx)(se.a,{variant:"h5",component:"h5",className:e.classes.root,children:"Log Expense"}),Object(n.jsxs)("form",{className:e.classes.root,onSubmit:function(e){return L.apply(this,arguments)},children:[Object(n.jsx)(me.a,{utils:he.a,children:Object(n.jsx)(fe.a,{disableToolbar:!0,fullWidth:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-inline",name:"Date",label:"Date",value:p.date,onChange:function(e){b(Object(u.a)(Object(u.a)({},p),{},{date:e}))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(n.jsx)(k.a,{onChange:N,value:p.vendor,label:"Vendor",name:"vendor",type:"string",InputLabelProps:{shrink:!0}}),Object(n.jsx)(k.a,{onChange:N,value:p.amount,label:"Amount",name:"amount",type:"number",InputProps:{startAdornment:Object(n.jsx)(C.a,{position:"start",children:"$"})},inputProps:{step:"0.01"}}),Object(n.jsxs)(ie.a,{className:e.classes.formControl,children:[Object(n.jsx)(le.a,{htmlFor:"broad_category",children:"Broad Category"}),Object(n.jsx)(ue.a,{onChange:N,value:p.broad_category_id,name:"broad_category_id",labelId:"broad_category",label:"Broad Category",children:e.categories.broad_categories.map((function(e){return Object(n.jsx)(de.a,{value:e.id,children:e.name})}))})]}),w.length>0?Object(n.jsxs)(ie.a,{className:e.classes.formControl,children:[Object(n.jsx)(le.a,{htmlFor:"narrow_category",children:"Narrow Category"}),Object(n.jsx)(ue.a,{onChange:N,value:p.narrow_category_id,name:"narrow_category_id",labelId:"narrow_category",label:"Narrow Category",children:null===w||void 0===w?void 0:w.map((function(e){return Object(n.jsx)(de.a,{value:e.id,children:e.name})}))})]}):null,g.person?Object(n.jsxs)(ie.a,{className:e.classes.formControl,children:[Object(n.jsx)(le.a,{htmlFor:"person_id",children:"Person"}),Object(n.jsx)(ue.a,{onChange:N,value:p.person_id,name:"person_id",labelId:"person_id",label:"Person",children:e.categories.persons.map((function(e){return Object(n.jsx)(de.a,{value:e.id,children:e.name})}))})]}):null,Object(n.jsx)(k.a,{onChange:N,value:p.notes,label:"Notes",name:"notes",type:"string",InputLabelProps:{shrink:!0}}),Object(n.jsx)(pe.a,{type:"submit",variant:"contained",color:"primary",children:"Submit"})]})]})}function ye(e){var t=re(),a=t.Auth,o=t.setAuth,c=ge().setAlertState,s={date:new Date(Date.now()),amount:NaN,person_id:NaN,source:""},i=Object(r.useState)(s),d=Object(f.a)(i,2),p=d[0],b=d[1];function j(e){var t=e.target.name;b(Object(u.a)(Object(u.a)({},p),{},Object(l.a)({},t,e.target.value)))}function O(){return(O=Object(m.a)(h.a.mark((function t(n){var r,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),p.date&&p.amount&&p.person_id&&p.source){t.next=4;break}return c({severity:"error",message:"Please fill out all fields",open:!0}),t.abrupt("return");case 4:return r=Object(u.a)({},p),t.prev=5,r.date=null===(i=r.date)||void 0===i?void 0:i.toLocaleDateString("en-US"),e.setLoading(!0),t.next=10,M.postIncome(a.token,r);case 10:e.setLoading(!1),c({severity:"success",message:"Record Saved!",open:!0}),e.reloadWallChart(),t.next=26;break;case 15:if(t.prev=15,t.t0=t.catch(5),e.setLoading(!1),"Error! 500"!==t.t0.message){t.next=23;break}return c({severity:"error",message:"Server Error!",open:!0}),t.abrupt("return");case 23:J("income",r),c({severity:"warning",message:"Record Saved Locally",open:!0}),"Unauthorized"===t.t0.message&&o({type:"LOGOUT"});case 26:return t.prev=26,b(s),t.finish(26);case 29:case"end":return t.stop()}}),t,null,[[5,15,26,29]])})))).apply(this,arguments)}return Object(n.jsxs)(ce.a,{children:[Object(n.jsx)(_.a,{className:e.classes.close,onClick:function(){b(s),e.handleClose()},children:Object(n.jsx)(je.a,{})}),Object(n.jsx)(se.a,{variant:"h5",component:"h5",className:e.classes.root,children:"Log Income"}),Object(n.jsxs)("form",{className:e.classes.root,onSubmit:function(e){return O.apply(this,arguments)},children:[Object(n.jsx)(me.a,{utils:he.a,children:Object(n.jsx)(fe.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-inline",name:"Date",label:"Date",value:p.date,onChange:function(e){b(Object(u.a)(Object(u.a)({},p),{},{date:e}))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(n.jsx)(k.a,{onChange:j,value:p.source,label:"Source",name:"source",type:"string",InputLabelProps:{shrink:!0}}),Object(n.jsx)(k.a,{onChange:j,value:p.amount,label:"Amount",name:"amount",type:"number",InputProps:{startAdornment:Object(n.jsx)(C.a,{position:"start",children:"$"})},inputProps:{step:"0.01"}}),Object(n.jsxs)(ie.a,{className:e.classes.formControl,children:[Object(n.jsx)(le.a,{htmlFor:"person_id",children:"Person"}),Object(n.jsx)(ue.a,{onChange:j,value:p.person_id,name:"person_id",labelId:"person_id",label:"Person",children:e.categories.persons.map((function(e){return Object(n.jsx)(de.a,{value:e.id,children:e.name})}))})]}),Object(n.jsx)(pe.a,{type:"submit",variant:"contained",color:"primary",children:"Submit"})]})]})}var we=a(33),ke=a(355),Ce=a(340),_e=a(366),Se=a(367),Ne=a(359),Le=a(110),Ae=a.n(Le),Ee=a(344),Ie=a(343),Be=a(145),Te=a(141),Fe=a.n(Te),Pe=Object(D.a)((function(e){return Object(N.a)({grow:{flexGrow:1},menuButton:{marginRight:e.spacing(1)},title:{textAlign:"center",textTransform:"capitalize"},sectionDesktop:Object(l.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(l.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})})}));function De(e){var t=e.setEditOpen,a=Pe(),r=o.a.useState(null),c=Object(f.a)(r,2),s=c[0],i=c[1],l=Boolean(s),u=re(),d=u.Auth,p=u.setAuth;function b(){t(!0)}function j(){M.downloadFile(d.token,"".concat(d.user,"_expenses.xlsx"),"2020-01-01","2020-12-31"),m()}function h(){p({type:"LOGOUT"}),function(){ee.apply(this,arguments)}()}var m=function(){i(null)},O="primary-search-account-menu",g=Object(n.jsxs)(Be.a,{anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},id:O,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:l,onClose:m,children:[Object(n.jsx)(de.a,{onClick:b,children:"Edit"}),Object(n.jsx)(de.a,{onClick:j,children:"Downloads"}),Object(n.jsx)(de.a,{onClick:h,children:"Logout"})]});return Object(n.jsxs)("div",{className:a.grow,children:[Object(n.jsx)(Ee.a,{position:"static",children:Object(n.jsxs)(Ie.a,{children:[Object(n.jsxs)(se.a,{className:a.title,variant:"h6",noWrap:!0,children:[d.user,"'s Finances"]}),Object(n.jsx)("div",{className:a.grow}),Object(n.jsxs)("div",{className:a.sectionDesktop,children:[Object(n.jsx)(pe.a,{color:"inherit",onClick:b,children:"Edit"}),Object(n.jsx)(pe.a,{color:"inherit",onClick:j,children:"Download"}),Object(n.jsx)(pe.a,{color:"inherit",onClick:h,children:"Logout"})]}),Object(n.jsx)("div",{className:a.sectionMobile,children:Object(n.jsx)(_.a,{"aria-label":"show more","aria-controls":O,"aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},color:"inherit",children:Object(n.jsx)(Fe.a,{})})})]})}),g]})}var Ue=Object(S.a)((function(e){return Object(N.a)({head:{backgroundColor:e.palette.primary.main,color:e.palette.common.white,padding:10,fontSize:16},body:{padding:10,fontSize:14}})}))(w.a),ze=Object(S.a)((function(e){return Object(N.a)({root:{backgroundColor:e.palette.background.default,cursor:"pointer"}})}))(y.a),We=Object(S.a)((function(e){return Object(N.a)({root:{backgroundColor:L.a[800]}})}))(y.a),Me=Object(S.a)((function(e){return Object(N.a)({root:{backgroundColor:L.a[700]}})}))(y.a);function Re(e){var t=Object(r.useState)([!1]),a=Object(f.a)(t,2),o=a[0],c=a[1];var s=e.state.data.reduce((function(e,t){if(t.broad_category)if(e[t.broad_category]?e[t.broad_category].total+=parseFloat(t.amount):e[t.broad_category]={total:parseFloat(t.amount),narrow_categories:{}},t.narrow_category)e[t.broad_category].narrow_categories[t.narrow_category]?e[t.broad_category].narrow_categories[t.narrow_category].total+=parseFloat(t.amount):e[t.broad_category].narrow_categories[t.narrow_category]={total:parseFloat(t.amount),persons:{}},t.person&&(e[t.broad_category].narrow_categories[t.narrow_category].persons[t.person]?e[t.broad_category].narrow_categories[t.narrow_category].persons[t.person]+=parseFloat(t.amount):e[t.broad_category].narrow_categories[t.narrow_category].persons[t.person]=parseFloat(t.amount));else if(t.person){var a;(null===(a=e[t.broad_category].narrow_categories["--"])||void 0===a?void 0:a.persons[t.person])?(e[t.broad_category].narrow_categories["--"].persons[t.person]+=parseFloat(t.amount),e[t.broad_category].narrow_categories["--"].total+=parseFloat(t.amount)):e[t.broad_category].narrow_categories=Object(u.a)(Object(u.a)({},e[t.broad_category].narrow_categories),{},{"--":{persons:Object(l.a)({},t.person,parseFloat(t.amount)),total:parseFloat(t.amount)}})}return e}),{});return Object(r.useEffect)((function(){var e=Object.keys(s).map((function(e){return!1}));c(e)}),[e]),Object(n.jsx)(T.a,{component:P.a,children:Object(n.jsxs)(I.a,{children:[Object(n.jsx)(F.a,{children:Object(n.jsxs)(y.a,{children:[Object(n.jsx)(Ue,{children:"Broad category"}),Object(n.jsx)(Ue,{children:"Narrow Category"}),Object(n.jsx)(Ue,{children:"Person"}),Object(n.jsx)(Ue,{children:"Amount"})]})}),Object(n.jsx)(B.a,{children:Object.keys(s).map((function(e,t){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(ze,{onClick:function(){return function(e){var t=Object(b.a)(o);t[e]=!t[e],c(t)}(t)},children:[Object(n.jsx)(Ue,{children:e}),Object(n.jsx)(Ue,{children:"TOTAL"}),Object(n.jsx)(Ue,{}),Object(n.jsxs)(Ue,{children:["$",s[e].total.toFixed(2)]})]},t),s[e].narrow_categories&&o[t]?Object.keys(s[e].narrow_categories).map((function(t){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(We,{children:[Object(n.jsx)(Ue,{}),Object(n.jsx)(Ue,{children:t}),Object(n.jsx)(Ue,{children:"TOTAL"}),Object(n.jsxs)(Ue,{children:["$",s[e].narrow_categories[t].total.toFixed(2)]})]}),s[e].narrow_categories[t].persons?Object.keys(s[e].narrow_categories[t].persons).map((function(a){return Object(n.jsxs)(Me,{children:[Object(n.jsx)(Ue,{}),Object(n.jsx)(Ue,{}),Object(n.jsx)(Ue,{children:a}),Object(n.jsxs)(Ue,{children:["$",s[e].narrow_categories[t].persons[a].toFixed(2)]})]})})):null]})})):null]})}))})]})})}var Ge=a(345),Je=a(346);function $e(e){var t=e.classes,a=e.handleFormSubmit,r=e.handleFormChange,o=e.formState;return Object(n.jsx)(Ge.a,{className:t.root,children:Object(n.jsxs)(Je.a,{variant:"outlined",children:[Object(n.jsx)("h2",{className:t.root,children:"Reports"}),Object(n.jsxs)("form",{onSubmit:a,className:t.root,children:[Object(n.jsxs)(ie.a,{variant:"outlined",className:t.formControl,children:[Object(n.jsx)(le.a,{htmlFor:"form",children:"Report"}),Object(n.jsxs)(ue.a,{name:"form",label:"Report",labelId:"form",value:o.form,onChange:r,children:[Object(n.jsx)(de.a,{value:"income",children:"Income"}),Object(n.jsx)(de.a,{value:"expenses",children:"Expenses"}),Object(n.jsx)(de.a,{value:"pivot",children:"Pivot Table"})]})]}),Object(n.jsx)(k.a,{onChange:r,value:o.year,label:"Year",name:"year",type:"number",variant:"outlined"}),Object(n.jsxs)(ie.a,{variant:"outlined",className:t.formControl,children:[Object(n.jsx)(le.a,{htmlFor:"month2",children:"Month"}),Object(n.jsxs)(ue.a,{onChange:r,value:o.month,name:"month",labelId:"month2",label:"Month",children:[Object(n.jsx)(de.a,{value:1,children:"January"}),Object(n.jsx)(de.a,{value:2,children:"February"}),Object(n.jsx)(de.a,{value:3,children:"March"}),Object(n.jsx)(de.a,{value:4,children:"April"}),Object(n.jsx)(de.a,{value:5,children:"May"}),Object(n.jsx)(de.a,{value:6,children:"June"}),Object(n.jsx)(de.a,{value:7,children:"July"}),Object(n.jsx)(de.a,{value:8,children:"August"}),Object(n.jsx)(de.a,{value:9,children:"September"}),Object(n.jsx)(de.a,{value:10,children:"October"}),Object(n.jsx)(de.a,{value:11,children:"November"}),Object(n.jsx)(de.a,{value:12,children:"December"})]})]}),Object(n.jsx)(pe.a,{type:"submit",variant:"contained",color:"primary",children:"View"})]})]})})}var He=a(142);function Ye(e){var t=e.data;return Object(n.jsx)(Ge.a,{children:Object(n.jsx)(ke.a,{maxHeight:"50vh",children:Object(n.jsx)(He.Line,{data:t,height:300,width:600,options:{maintainAspectRatio:!1,scales:{xAxes:[{ticks:{fontColor:"#404B50"},gridLines:{color:"#404B50",zeroLineColor:"#404B50",drawOnChartArea:!1}}],yAxes:[{ticks:{fontColor:"#404B50",callback:function(e){return e>=1e3?"$"+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"$"+e}},gridLines:{color:"#404B50",zeroLineColor:"#404B50",drawOnChartArea:!1}}]}}})})})}var Ve=a(347),Ke=a(348),qe=a(358);function Qe(e){var t=re(),a=t.Auth,o=t.setAuth,c=ge().setAlertState,s={person:"",broad_category:"",broad_category_id:NaN,narrow_category:"",has_person:!1},i=Object(r.useState)(s),d=Object(f.a)(i,2),p=d[0],b=d[1];function j(e){var t=e.target.name,a=e.target.value;"has_person"===t&&(a=e.target.checked),b(Object(u.a)(Object(u.a)({},p),{},Object(l.a)({},t,a)))}function O(e,t){return g.apply(this,arguments)}function g(){return(g=Object(m.a)(h.a.mark((function t(n,r){var i,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),e.setLoading(!0),t.prev=2,t.t0=r,t.next="person"===t.t0?6:"broad_category"===t.t0?10:"narrow_category"===t.t0?14:18;break;case 6:if((i={person:p.person}).person){t.next=9;break}throw new Error("Empty Input");case 9:return t.abrupt("break",18);case 10:if((i={broad_category:p.broad_category,has_person:p.has_person}).broad_category){t.next=13;break}throw new Error("Empty Input");case 13:return t.abrupt("break",18);case 14:if((i={narrow_category:p.narrow_category,broad_category_id:p.broad_category_id,has_person:p.has_person}).narrow_category&&i.broad_category_id){t.next=17;break}throw new Error("Empty Input");case 17:return t.abrupt("break",18);case 18:return t.next=20,M.addCategories(a.token,i);case 20:return c({severity:"success",message:"Category Added!",open:!0}),t.next=23,M.getCategories(a.token);case 23:l=t.sent,e.setCategories(l),t.next=39;break;case 27:t.prev=27,t.t1=t.catch(2),t.t2=t.t1.message,t.next="Error! 500"===t.t2?32:"Unauthorized"===t.t2?34:"Empty Input"===t.t2?36:38;break;case 32:return c({severity:"error",message:"Server Error!",open:!0}),t.abrupt("break",39);case 34:return o({type:"LOGOUT"}),t.abrupt("break",39);case 36:return c({severity:"error",message:"Please fill out all fields",open:!0}),t.abrupt("break",39);case 38:c({severity:"error",message:"You must be connected to the internet to add categories",open:!0});case 39:return t.prev=39,e.setLoading(!1),b(s),t.finish(39);case 43:case"end":return t.stop()}}),t,null,[[2,27,39,43]])})))).apply(this,arguments)}return Object(n.jsxs)(ce.a,{children:[Object(n.jsx)(_.a,{onClick:function(){return e.handleClose()},className:e.classes.close,children:Object(n.jsx)(je.a,{})}),Object(n.jsx)(Je.a,{className:e.classes.card,children:Object(n.jsxs)(Ve.a,{children:[Object(n.jsx)(se.a,{variant:"h5",component:"h5",className:e.classes.root,children:"Add a Person"}),Object(n.jsxs)("form",{className:e.classes.root,onSubmit:function(e){return O(e,"person")},children:[Object(n.jsx)(k.a,{onChange:j,value:p.person,label:"Person",name:"person",type:"string"}),Object(n.jsx)(pe.a,{type:"submit",variant:"contained",color:"primary",children:"Add"})]})]})}),Object(n.jsx)(Je.a,{className:e.classes.card,children:Object(n.jsxs)(Ve.a,{children:[Object(n.jsx)(se.a,{variant:"h5",component:"h5",className:e.classes.root,children:"Add a Broad Category"}),Object(n.jsxs)("form",{className:e.classes.root,onSubmit:function(e){return O(e,"broad_category")},children:[Object(n.jsx)(k.a,{onChange:j,value:p.broad_category,label:"Broad Category",name:"broad_category",type:"string"}),Object(n.jsx)(Ke.a,{control:Object(n.jsx)(qe.a,{checked:p.has_person,onChange:j,name:"has_person",inputProps:{"aria-label":"primary checkbox"}}),label:"Person"}),Object(n.jsx)(pe.a,{type:"submit",variant:"contained",color:"primary",children:"Add"})]})]})}),Object(n.jsx)(Je.a,{className:e.classes.card,children:Object(n.jsxs)(Ve.a,{children:[Object(n.jsx)(se.a,{variant:"h5",component:"h5",className:e.classes.root,children:"Add a Narrow Category"}),Object(n.jsxs)("form",{className:e.classes.root,onSubmit:function(e){return O(e,"narrow_category")},children:[Object(n.jsxs)(ie.a,{className:e.classes.formControl,children:[Object(n.jsx)(le.a,{htmlFor:"broad_category",children:"Broad Category"}),Object(n.jsx)(ue.a,{onChange:j,name:"broad_category_id",labelId:"broad_category_id",label:"Broad Category",children:e.categories.broad_categories.map((function(e){return Object(n.jsx)(de.a,{value:e.id,children:e.name})}))})]}),Object(n.jsx)(k.a,{onChange:j,value:p.narrow_category,label:"Narrow Category",name:"narrow_category",type:"string"}),Object(n.jsx)(pe.a,{type:"submit",variant:"contained",color:"primary",children:"Add"})]})]})})]})}var Xe=function(){var e,t,a,c=Object(we.a)(),s=re(),i=s.Auth,d=s.setAuth,p=ge(),j=p.setAlertState,O=p.setLoading,g=Object(r.useState)({form:"expenses",year:new Date(Date.now()).getUTCFullYear(),month:new Date(Date.now()).getUTCMonth()+1}),x=Object(f.a)(g,2),v=x[0],y=x[1],w=Object(r.useState)({schema:{fields:[]},data:[{amount:"",date:"",source:"",person:"",id:NaN,person_id:NaN}]}),k=Object(f.a)(w,2),C=k[0],_=k[1],S=Object(r.useState)({schema:{fields:[]},data:[{amount:"",date:"",source:"",vendor:"",broad_category:"",narrow_category:"",person:"",notes:"",id:NaN}]}),L=Object(f.a)(S,2),A=L[0],E=L[1],I=Object(r.useState)({persons:[],narrow_categories:[],broad_categories:[]}),B=Object(f.a)(I,2),T=B[0],F=B[1],P=Object(r.useReducer)((function(e,t){return t.labels.length>0&&(e={labels:t.labels,datasets:[{label:"Income",data:t.income,fill:!1,borderColor:c.palette.primary.main},{label:"Expenses",data:t.expenses,fill:!1,borderColor:c.palette.secondary.main}]}),e}),{labels:[],datasets:[{label:"Income",data:[],fill:!1,borderColor:c.palette.primary.main},{label:"Expenses",data:[],fill:!1,borderColor:c.palette.secondary.main}]}),z=Object(f.a)(P,2),W=z[0],R=z[1];function G(e){if(e.date){var t=new Date(e.date),a=t.getUTCFullYear(),n=(1+t.getUTCMonth()).toString();n=n.length>1?n:"0"+n;var r=t.getUTCDate().toString(),o=n+"/"+(r=r.length>1?r:"0"+r)+"/"+a;return e.date=o,e}return e}function J(){return(J=Object(m.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),a=v.form,O(!0),e.next=6,M[a](i.token,v);case 6:n=e.sent,O(!1),"pivot"!==a&&(n.data=n.data.map(G)),e.t0=a,e.next="expenses"===e.t0?12:"income"===e.t0?14:"pivot"===e.t0?16:18;break;case 12:return E(n),e.abrupt("break",18);case 14:return _(n),e.abrupt("break",18);case 16:return E(n),e.abrupt("break",18);case 18:e.next=25;break;case 20:e.prev=20,e.t1=e.catch(0),"Unauthorized"===e.t1.message&&d({type:"LOGOUT"}),O(!1),j({severity:"error",message:"Error Fetching Data",open:!0});case 25:case"end":return e.stop()}}),e,null,[[0,20]])})))).apply(this,arguments)}function $(e,t){var a,n;switch(e){case"person":a=T.persons,n="person_id";break;case"broad_category":a=T.broad_categories,n="broad_category_id";break;case"narrow_category":a=T.narrow_categories,n="narrow_category_id"}var r=a.filter((function(e){return e.name===t}))[0];return r?{id:n,dataListItem:r}:{id:null,dataListItem:null}}function Y(){return(Y=Object(m.a)(h.a.mark((function e(t,a){var n,r,o,c,s,i,d,p;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=t.target,r=n.name,o=n.value,c=Object(b.a)(A.data),s=Object(u.a)(Object(u.a)({},c[a]),{},Object(l.a)({},r,o)),"person"!==r&&"broad_category"!==r&&"narrow_category"!==r||(i=$(r,o),d=i.id,p=i.dataListItem,d&&p&&(s=Object(u.a)(Object(u.a)({},s),{},Object(l.a)({},d,p.id)))),c[a]=s,E(Object(u.a)(Object(u.a)({},A),{},{data:c}))}catch(j){console.error(j)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(m.a)(h.a.mark((function e(t,a){var n,r,o,c,s,i,d,p;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=t.target,r=n.name,o=n.value,c=Object(b.a)(C.data),s=Object(u.a)(Object(u.a)({},c[a]),{},Object(l.a)({},r,o)),"person"===r&&(i=$(r,o),d=i.id,p=i.dataListItem,d&&p&&(s=Object(u.a)(Object(u.a)({},s),{},Object(l.a)({},d,p.id)))),c[a]=s,_(Object(u.a)(Object(u.a)({},C),{},{data:c}))}catch(j){console.error(j)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return Z.apply(this,arguments)}function Z(){return(Z=Object(m.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:return(t=e.sent)&&R(t),e.prev=4,e.next=7,M.wallchart(i.token);case 7:t=e.sent,R(t),q(t),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),"No Data"===e.t0.message&&console.log("No Data!");case 15:case"end":return e.stop()}}),e,null,[[4,12]])})))).apply(this,arguments)}function ee(){return(ee=Object(m.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.updateExpenses(i.token,A.data[t]);case 3:j({severity:"success",message:"Record updated!",open:!0}),Q(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),j({severity:"error",message:"Error: Failed to save!",open:!0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function te(){return(te=Object(m.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.updateIncome(i.token,C.data[t]);case 3:j({severity:"success",message:"Record updated!",open:!0}),Q(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),j({severity:"error",message:"Error: Failed to save!",open:!0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ae(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(m.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"expenses"!==v.form){e.next=8;break}return e.next=4,M.deleteExpenses(i.token,t);case 4:a=A.data.filter((function(e){return e.id!==t})),E(Object(u.a)(Object(u.a)({},A),{},{data:a})),e.next=13;break;case 8:if("income"!==v.form){e.next=13;break}return e.next=11,M.deleteIncome(i.token,t);case 11:n=C.data.filter((function(e){return e.id!==t})),_(Object(u.a)(Object(u.a)({},C),{},{data:n}));case 13:Q(),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0),"Unauthorized"===e.t0&&d({type:"LOGOUT"});case 20:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}var oe=Object(D.a)((function(e){var t;return Object(N.a)({home:{padding:"0 0 6em 0"},formControl:{margin:e.spacing(1),minWidth:"10em"},selectEmpty:{marginTop:e.spacing(2)},root:(t={display:"flex",justifyContent:"center",flexWrap:"wrap"},Object(l.a)(t,e.breakpoints.up("md"),{flexWrap:"noWrap"}),Object(l.a)(t,"& > *",Object(l.a)({margin:e.spacing(1)},e.breakpoints.down("xs"),{width:"100%"})),t),wallchart:{width:"100%"},logoutBtn:{position:"fixed",top:"0px",right:"0px",margin:"1em"},downloadBtn:{position:"fixed",top:"0px",right:"100px",margin:"1em"},editBtn:{position:"fixed",top:"0px",left:"0px",margin:"1em"},offline:{backgroundColor:e.palette.secondary.main,color:"white",textAlign:"center",position:"sticky"},speedDial:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2)},dialog:{width:"100%"},datePicker:Object(l.a)({},e.breakpoints.down("sm"),{marginLeft:"-10px"}),card:{margin:"1em 0"},close:{position:"absolute",right:"0",top:"0"}})}))(),ce=o.a.useState(!1),se=Object(f.a)(ce,2),ie=se[0],le=se[1],ue=[{icon:Object(n.jsx)(Ae.a,{}),name:"Expenses",action:function(){je(!0),le(!1)},operation:"expenses"},{icon:Object(n.jsx)(Ae.a,{}),name:"Income",action:function(){Oe(!0),le(!1)},operation:"income"}],de=Object(r.useState)(!1),pe=Object(f.a)(de,2),be=pe[0],je=pe[1],he=Object(r.useState)(!1),me=Object(f.a)(he,2),fe=me[0],Oe=me[1],xe=Object(r.useState)(!1),Le=Object(f.a)(xe,2),Ee=Le[0],Ie=Le[1];function Be(){je(!1),Oe(!1),Ie(!1)}return Object(r.useEffect)((function(){function e(){return(e=Object(m.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.getCategories(i.token);case 3:t=e.sent,F(t),H(t),e.next=14;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,V();case 12:a=e.sent,F(a);case 14:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),Q()}),[i.token]),Object(n.jsxs)(ke.a,{component:"div",className:oe.home,children:[Object(n.jsx)(De,{setEditOpen:Ie}),Object(n.jsxs)(ke.a,{component:"header",className:"header",children:[Object(n.jsx)("h1",{style:{textAlign:"center"},children:"Wall Chart"}),Object(n.jsx)(Ye,{data:W}),Object(n.jsx)($e,{classes:oe,handleFormSubmit:function(e){return J.apply(this,arguments)},handleFormChange:function(e){var t=e.target.name;y(Object(u.a)(Object(u.a)({},v),{},Object(l.a)({},t,e.target.value)))},formState:v})]}),Object(n.jsxs)("div",{className:"body",children:["income"===v.form&&(null===(e=C.data[0])||void 0===e?void 0:e.id)?Object(n.jsx)(U,{state:C,dataLists:T,handleChange:function(e,t){return K.apply(this,arguments)},handleUpdate:function(e){return te.apply(this,arguments)},deleteEntry:ae,form:v.form}):null,"expenses"===v.form&&(null===(t=A.data[0])||void 0===t?void 0:t.id)?Object(n.jsx)(U,{state:A,dataLists:T,handleChange:function(e,t){return Y.apply(this,arguments)},handleUpdate:function(e){return ee.apply(this,arguments)},deleteEntry:ae,form:v.form}):null,"pivot"===v.form&&(null===(a=A.data[0])||void 0===a?void 0:a.id)?Object(n.jsx)(Re,{state:A}):null]}),Object(n.jsx)(Ce.a,{onClose:Be,open:Ee,maxWidth:"xl",children:Object(n.jsx)(Qe,{classes:oe,handleClose:Be,categories:T,setCategories:F,setLoading:O})}),Object(n.jsx)(Ce.a,{onClose:Be,open:be,maxWidth:"xl",children:Object(n.jsx)(ve,{classes:oe,handleClose:Be,categories:T,setLoading:O,reloadWallChart:Q})}),Object(n.jsx)(Ce.a,{onClose:Be,open:fe,maxWidth:"xl",children:Object(n.jsx)(ye,{classes:oe,handleClose:Be,categories:T,setLoading:O,reloadWallChart:Q})}),Object(n.jsx)(_e.a,{ariaLabel:"SpeedDial",className:oe.speedDial,icon:Object(n.jsx)(Se.a,{}),onClose:function(){le(!1)},onOpen:function(){le(!0)},open:ie,onMouseLeave:function(){},children:ue.map((function(e){return Object(n.jsx)(Ne.a,{icon:e.icon,tooltipTitle:e.name,tooltipOpen:!0,onClick:e.action},e.name)}))})]})},Ze=a(350),et=Object(D.a)((function(e){return Object(N.a)({root:{display:"flex",justifyContent:"center",flexWrap:"wrap","& > *":Object(l.a)({margin:e.spacing(1)},e.breakpoints.down("xs"),{width:"100%"})},heading:{textAlign:"center",fontFamily:"Times New Roman, serif"}})}));function tt(e){var t=e.handleClose,a=ge(),o=a.setAlertState,c=a.setLoading,s=Object(r.useState)({username:"",password:""}),i=Object(f.a)(s,2),d=i[0],p=i[1],b=function(e){var t=e.target,a=t.name,n=t.value;p(Object(u.a)(Object(u.a)({},d),{},Object(l.a)({},a,n)))},j=function(){var e=Object(m.a)(h.a.mark((function e(a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),c(!0),e.prev=2,e.next=5,M.signup(d);case 5:o({severity:"success",message:"You're signed up! Please log in",open:!0}),t(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),o({severity:"error",message:"Error Signing Up!",open:!0});case 13:return e.prev=13,c(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,9,13,16]])})));return function(t){return e.apply(this,arguments)}}(),O=et();return Object(n.jsx)(ce.a,{children:Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)(se.a,{variant:"h2",component:"h4",className:O.heading,children:"Sign Up"}),Object(n.jsxs)("form",{className:O.root,onSubmit:j,children:[Object(n.jsx)(k.a,{onChange:b,value:d.username,type:"text",name:"username",label:"username",variant:"outlined"}),Object(n.jsx)(k.a,{onChange:b,value:d.password,type:"password",name:"password",label:"password",variant:"outlined"}),Object(n.jsx)(pe.a,{variant:"contained",color:"primary",name:"signup",type:"submit",children:"Sign Up"})]})]})})}var at=Object(D.a)((function(e){return Object(N.a)({root:{flexGrow:1},heading:{textAlign:"center",fontFamily:"Times New Roman, serif"},signupBtn:{float:"right",margin:"1em"},sidebar:{display:"flex",justifyContent:"center",textAlign:"center",flexWrap:"wrap"},form:{display:"flex",justifyContent:"center",textAlign:"center",flexWrap:"wrap","& > *":Object(l.a)({margin:e.spacing(1),display:"flex",justifyContent:"center",textAlign:"center",flexWrap:"wrap"},e.breakpoints.down("xs"),{width:"100%"})},link:{color:e.palette.primary.main,"&:hover":e.palette.secondary.main}})}));function nt(){var e=re(),t=e.Auth,a=e.setAuth,o=ge(),c=o.setAlertState,s=o.setLoading,i=Object(r.useState)({username:"",password:""}),p=Object(f.a)(i,2),b=p[0],j=p[1],O=Object(r.useState)(!1),g=Object(f.a)(O,2),x=g[0],v=g[1],y=function(e){var t=e.target,a=t.name,n=t.value;j(Object(u.a)(Object(u.a)({},b),{},Object(l.a)({},a,n)))},w=function(){var e=Object(m.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s(!0),e.prev=2,e.next=5,M.login(b);case 5:n=e.sent,a({type:"LOGIN",payload:{user:b.username,token:n.token}}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),c({severity:"error",message:"Incorrect username or password",open:!0});case 13:return e.prev=13,s(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,9,13,16]])})));return function(t){return e.apply(this,arguments)}}(),C=at();function _(){v(!1)}return t.loggedIn?Object(n.jsx)(d.a,{to:"/"}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(Ze.a,{container:!0,className:C.root,children:[Object(n.jsx)(Ze.a,{item:!0,xs:12,children:Object(n.jsx)(se.a,{variant:"h1",component:"h2",gutterBottom:!0,className:C.heading,children:"Flask of Finances"})}),Object(n.jsx)(Ze.a,{item:!0,xs:12,className:C.sidebar,children:Object(n.jsxs)("form",{className:C.form,onSubmit:w,children:[Object(n.jsx)(k.a,{onChange:y,value:b.username,type:"text",name:"username",label:"username",variant:"outlined"}),Object(n.jsx)(k.a,{onChange:y,value:b.password,type:"password",name:"password",label:"password",variant:"outlined"}),Object(n.jsx)(pe.a,{variant:"contained",color:"primary",name:"login",type:"submit",children:"Login"})]})}),Object(n.jsx)(Ze.a,{item:!0,xs:12,className:C.sidebar,children:Object(n.jsx)(pe.a,{className:C.link,onClick:function(){return v(!0)},children:"Sign Up"})})]}),Object(n.jsx)(Ce.a,{onClose:_,open:x,maxWidth:"xl",children:Object(n.jsx)(tt,{handleClose:_})})]})}a(280);var rt=a(360),ot=a(356);function ct(e){return Object(n.jsx)(ot.a,Object(u.a)({elevation:6,variant:"filled"},e))}var st=Object(D.a)((function(e){return{snackbar:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function it(e){var t=e.state,a=e.setState,r=st(),o=function(e,n){"clickaway"!==n&&a(Object(u.a)(Object(u.a)({},t),{},{open:!1}))};return Object(n.jsx)("div",{className:r.snackbar,children:Object(n.jsx)(rt.a,{open:t.open,autoHideDuration:3e3,onClose:o,children:Object(n.jsx)(ct,{onClose:o,severity:t.severity,children:t.message})})})}var lt=a(144),ut=a(352),dt=a(91),pt=a(351),bt=a(353),jt=a(284),ht=a(342),mt=Object(lt.a)();var ft,Ot=(ft={palette:{type:"dark",background:{default:L.a[900]},primary:{main:dt.a[900]},secondary:{main:pt.a[800]}}},Object(lt.a)(Object(u.a)({overrides:{MuiPickersBasePicker:{container:Object(l.a)({backgroundColor:L.a[900]},mt.breakpoints.down("xs"),{marginLeft:"-10px"})},MuiCard:{root:{backgroundColor:L.a[900]}},MuiDialogContent:{root:{backgroundColor:L.a[900]}},MuiPickersCalendarHeader:{iconButton:{backgroundColor:L.a[900]}}}},ft))),gt=function(e){var t=e.component,a=e.loggedIn,r=Object(i.a)(e,["component","loggedIn"]);return Object(n.jsx)(d.b,Object(u.a)(Object(u.a)({},r),{},{render:function(e){return a?Object(n.jsx)(t,Object(u.a)({},e)):Object(n.jsx)(d.a,{to:"/login"})}}))};function xt(){var e=re(),t=e.Auth,a=e.setAuth,o=ge(),c=o.alertState,s=o.setAlertState,i=o.loading,l=Object(D.a)((function(e){return Object(N.a)({backdrop:{zIndex:1301,color:"#fff"}})}))();return Object(r.useEffect)((function(){var e=localStorage.getItem("token"),t=localStorage.getItem("user");e&&M.checkAuth(e).then((function(t){return a({type:"LOGIN",payload:{user:t.username,token:e}})})).catch((function(n){"Unauthorized"===n.message?a({type:"LOGOUT"}):a({type:"LOGIN",payload:{user:t||"",token:e||""}})}))}),[]),Object(r.useEffect)((function(){!function(){G.apply(this,arguments)}()})),Object(n.jsxs)(ut.a,{theme:Ot,children:[Object(n.jsx)(bt.a,{}),Object(n.jsxs)(p.a,{children:[Object(n.jsx)(gt,{path:"/",loggedIn:t.loggedIn,setLoggedIn:a,component:Xe}),Object(n.jsx)(d.b,{exact:!0,path:"/login",children:Object(n.jsx)(nt,{})})]}),Object(n.jsx)(it,{state:c,setState:s}),Object(n.jsx)(jt.a,{className:l.backdrop,open:i,children:Object(n.jsx)(ht.a,{disableShrink:!0,color:"inherit"})})]})}var vt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function yt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var wt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,370)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),o(e),c(e)}))};s.a.render(Object(n.jsxs)(o.a.StrictMode,{children:[Object(n.jsx)(oe,{children:Object(n.jsx)(xe,{children:Object(n.jsx)(xt,{})})}),","]}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");vt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):yt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):yt(t,e)}))}}(),wt()}},[[281,1,2]]]);
//# sourceMappingURL=main.cc1e0b99.chunk.js.map