(this.webpackJsonpreact_client=this.webpackJsonpreact_client||[]).push([[0],{178:function(e,t,a){},280:function(e,t,a){},281:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),o=a.n(r),c=a(17),s=a.n(c),i=(a(178),a(14)),l=a(146),u=a(13),d=a(7),p=a(21),b=a(109),j=a(74),h=a(9),m=a.n(h),f=a(15),O=a(140),g=a.n(O),x=a(139),v=a.n(x),y=a(324),w=a(326),k=a(362),C=a(332),_=a(333),S=a(5),N=a(361),I=a(325),E=Object(S.a)((function(e){return Object(N.a)({body:{fontSize:14,padding:0,maxWidth:"10ch"}})}))(y.a),L=Object(S.a)((function(e){return Object(N.a)({root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default},"&:nth-of-type(even)":{backgroundColor:I.a[800]},"& input":{backgroundColor:"inherit",paddingLeft:0}}})}))(w.a);function A(e){var t=Object(r.useState)({amount:""}),a=Object(i.a)(t,2),o=a[0],c=a[1];function s(e,t){return Object(n.jsx)("datalist",{id:t,children:e.map((function(e){return Object(n.jsx)("option",{value:e.name},e.id)}))})}function l(e){var t=e.target,a=t.name,n=t.value;c(Object(d.a)(Object(d.a)({},o),{},Object(u.a)({},a,n)))}return Object(r.useEffect)((function(){c(e.entry)}),[e.entry]),Object(n.jsxs)(L,{children:[e.fields.filter((function(e){return!e.name.includes("id")})).map((function(t){var a,r,c,i,u,d;return Object(n.jsxs)(E,{children:[Object(n.jsx)(k.a,{name:t.name,onBlur:function(t){e.handleChange(t,e.i)},onChange:l,className:"tableInput",value:o[t.name]||"",inputProps:{list:t.name},InputProps:{startAdornment:Object(n.jsx)(C.a,{position:"start",children:"amount"===t.name?"$":null}),disableUnderline:!0},style:{width:"80%"}}),"person"===t.name&&(null===(a=e.dataLists)||void 0===a?void 0:a.persons)?s(null===(r=e.dataLists)||void 0===r?void 0:r.persons,t.name):null,"narrow_category"===t.name&&(null===(c=e.dataLists)||void 0===c?void 0:c.narrow_categories)?s(null===(i=e.dataLists)||void 0===i?void 0:i.narrow_categories,t.name):null,"broad_category"===t.name&&(null===(u=e.dataLists)||void 0===u?void 0:u.broad_categories)?s(null===(d=e.dataLists)||void 0===d?void 0:d.broad_categories,t.name):null]})})),Object(n.jsx)(E,{children:Object(n.jsx)(_.a,{color:"primary",onClick:function(){return e.handleUpdate(e.i)},children:Object(n.jsx)(v.a,{})})}),Object(n.jsx)(E,{children:Object(n.jsx)(_.a,{"aria-label":"delete",color:"secondary",onClick:function(){return e.deleteEntry(o.id)},children:Object(n.jsx)(g.a,{})})})]})}var B=a(336),T=a(338),F=a(335),P=a(337),U=a(93),D=a(334);function z(e){var t=Object(S.a)((function(e){return Object(N.a)({head:{backgroundColor:e.palette.primary.main,color:e.palette.common.white,padding:10,fontSize:16}})}))(y.a),a=Object(D.a)((function(e){return Object(N.a)({table:{minWidth:650,padding:"0 1em"}})}))(),o=Object(r.createRef)();return Object(r.useEffect)((function(){o.current&&o.current.scrollIntoView({behavior:"smooth"})})),Object(n.jsx)(F.a,{component:U.a,children:Object(n.jsxs)(B.a,{className:a.table,ref:o,children:[Object(n.jsx)(P.a,{children:Object(n.jsxs)(w.a,{children:[e.state.schema.fields.filter((function(e){return!e.name.includes("id")})).map((function(e){return Object(n.jsx)(t,{style:{textTransform:"capitalize"},children:e.name.replace("_"," ")},e.name)})),Object(n.jsx)(t,{children:Object(n.jsx)("span",{children:"Save"})}),Object(n.jsx)(t,{children:Object(n.jsx)("span",{children:"Delete"})})]})}),Object(n.jsx)(T.a,{className:"tableBody",children:e.state.data.map((function(t,a){return Object(n.jsx)(A,{entry:t,i:a,fields:e.state.schema.fields,handleChange:e.handleChange,handleUpdate:e.handleUpdate,dataLists:e.dataLists,deleteEntry:e.deleteEntry},a)}))})]})})}function W(e,t){if(401===e.status)throw new Error("Unauthorized");if(404===e.status)throw new Error("No Data");if(200!==e.status)throw new Error("Error! "+e.status);return"json"===t?e.json():"text"===t?e.text():e.blob()}var R,M={addCategories:function(e,t){return fetch("/api/categories/",{method:"POST",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return W(e,"text")}))},getCategories:function(e){return fetch("/api/categories/",{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return W(e,"json")}))},expenses:function(e,t){return fetch("/api/expenses/".concat(t.year,"/").concat(t.month),{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return W(e,"json")}))},postExpenses:function(e,t){return fetch("/api/expenses/",{method:"POST",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return W(e,"text")}))},postBatchExpenses:function(e,t){return fetch("/api/expenses/batch",{method:"POST",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return W(e,"text")}))},postIncome:function(e,t){return fetch("/api/income/",{method:"POST",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return W(e,"text")}))},postBatchIncome:function(e,t){return fetch("/api/income/batch",{method:"POST",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return W(e,"text")}))},deleteExpenses:function(e,t){return fetch("/api/expenses/".concat(t),{method:"DELETE",headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return W(e,"text")}))},updateExpenses:function(e,t){return fetch("/api/expenses/".concat(t.id),{method:"PUT",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return W(e,"text")}))},income:function(e,t){return fetch("/api/income/".concat(t.year,"/").concat(t.month),{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return W(e,"json")}))},updateIncome:function(e,t){return fetch("/api/income/".concat(t.id),{method:"PUT",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return W(e,"text")}))},deleteIncome:function(e,t){return fetch("/api/income/".concat(t),{method:"DELETE",headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return W(e,"text")}))},pivot:function(e,t){return fetch("/api/expenses/".concat(t.year,"/").concat(t.month),{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return W(e,"json")}))},wallchart:function(e){return fetch("/wallchart",{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return W(e,"json")}))},dataList:function(e){return fetch("/api/datalists",{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return W(e,"json")}))},signup:function(e){return fetch("/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return W(e,"text")}))},login:function(e){return fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return W(e,"json")}))},checkAuth:function(e){return fetch("/auth/checkAuth",{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return W(e,"json")}))},downloadFile:function(e,t,a,n){fetch("/api/expenses/file/".concat(a,"/").concat(n),{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return W(e,"blob")})).then((function(e){var a=window.URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.download=t,document.body.appendChild(n),n.click(),n.remove()}))}},G=a(147);function J(){return(J=Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.a)("finances",1,{upgrade:function(e){return Object(f.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.createObjectStore("expenses",{autoIncrement:!0}),e.createObjectStore("income",{autoIncrement:!0}),e.createObjectStore("broad_categories",{autoIncrement:!0}),e.createObjectStore("narrow_categories",{autoIncrement:!0}),e.createObjectStore("persons",{autoIncrement:!0}),e.createObjectStore("wallchart",{autoIncrement:!0});case 6:case"end":return t.stop()}}),t)})))()}});case 2:R=e.sent,navigator.onLine&&ae();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t){return Y.apply(this,arguments)}function Y(){return(Y=Object(f.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.put(t,a);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return H.apply(this,arguments)}function H(){return(H=Object(f.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object.keys(t).map((function(e){var a;R.clear(e),null===(a=t[e])||void 0===a||a.map((function(t){R.put(e,t)}))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return q.apply(this,arguments)}function q(){return(q=Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={broad_categories:[],narrow_categories:[],persons:[]},["broad_categories","narrow_categories","persons"].map(function(){var e=Object(f.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.getAll(a);case 2:n=e.sent,t[a]=n;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return X.apply(this,arguments)}function X(){return(X=Object(f.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.clear("wallchart");case 2:R.put("wallchart",t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return ee.apply(this,arguments)}function ee(){return(ee=Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.getAll("wallchart");case 2:return t=e.sent,e.abrupt("return",t[0]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return(te=Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.clear("expenses");case 3:return e.next=5,R.clear("income");case 5:return e.abrupt("return","pendingFinances cleared!");case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function ae(){return ne.apply(this,arguments)}function ne(){return(ne=Object(f.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.prev=1,e.next=4,R.getAll("expenses");case 4:if(!((a=e.sent).length>0)){e.next=9;break}return e.next=8,M.postBatchExpenses(t,a);case 8:R.clear("expenses");case 9:return e.next=11,R.getAll("income");case 11:if(!((n=e.sent).length>0)){e.next=16;break}return e.next=15,M.postBatchIncome(t,n);case 15:R.clear("income");case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})))).apply(this,arguments)}window.addEventListener("online",ae);var re=a(339),oe=a(151),ce=a(329),se=a(364),ie=a(357),le=a(365),ue=a(341),de=a(63),pe=a.n(de),be=a(90),je=a(25),he=a(354);function me(e){var t=o.a.useContext(mt),a=t.Auth,c=t.setAuth,s=t.setAlertState,l={date:new Date(Date.now()),amount:NaN,person_id:NaN,broad_category_id:NaN,narrow_category_id:NaN,vendor:"",notes:""},p=Object(r.useState)(l),b=Object(i.a)(p,2),j=b[0],h=b[1],O=Object(r.useState)({name:"",id:NaN}),g=Object(i.a)(O,2),x=g[0],v=g[1],y=Object(r.useState)([]),w=Object(i.a)(y,2),S=w[0],N=w[1];function I(t){var a=t.target.name;if(h(Object(d.a)(Object(d.a)({},j),{},Object(u.a)({},a,t.target.value))),"broad_category_id"===a){var n=e.categories.broad_categories.filter((function(e){return e.id===t.target.value}))[0];v(n);var r=e.categories.narrow_categories.filter((function(e){return e.broad_category_id===n.id}));N(r)}}function E(){return(E=Object(f.a)(m.a.mark((function t(n){var r,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),j.date&&j.amount&&j.broad_category_id&&j.vendor){t.next=4;break}return s({severity:"error",message:"Please fill out all fields",open:!0}),t.abrupt("return");case 4:return(o=Object(d.a)({},j)).date=null===(r=o.date)||void 0===r?void 0:r.toLocaleDateString("en-US"),t.prev=6,e.setLoading(!0),t.next=10,M.postExpenses(a.token,o);case 10:e.setLoading(!1),s({severity:"success",message:"Record Saved!",open:!0}),e.reloadWallChart(),t.next=26;break;case 15:if(t.prev=15,t.t0=t.catch(6),e.setLoading(!1),"Error! 500"!==t.t0.message){t.next=23;break}return s({severity:"error",message:"Server Error! Contact Eli",open:!0}),t.abrupt("return");case 23:$("expenses",o),"Unauthorized"===t.t0.message&&c({type:"LOGOUT"}),s({severity:"warning",message:"Record Saved Locally",open:!0});case 26:return t.prev=26,h(l),v({name:"",id:NaN}),t.finish(26);case 30:case"end":return t.stop()}}),t,null,[[6,15,26,30]])})))).apply(this,arguments)}return Object(n.jsxs)(re.a,{children:[Object(n.jsx)(_.a,{className:e.classes.close,onClick:function(){h(l),e.handleClose()},children:Object(n.jsx)(pe.a,{})}),Object(n.jsx)(oe.a,{variant:"h5",component:"h5",className:e.classes.root,children:"Log Expense"}),Object(n.jsxs)("form",{className:e.classes.root,onSubmit:function(e){return E.apply(this,arguments)},children:[Object(n.jsx)(je.a,{utils:be.a,children:Object(n.jsx)(he.a,{disableToolbar:!0,fullWidth:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-inline",name:"Date",label:"Date",value:j.date,onChange:function(e){h(Object(d.a)(Object(d.a)({},j),{},{date:e}))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(n.jsx)(k.a,{onChange:I,value:j.vendor,label:"Vendor",name:"vendor",type:"string",InputLabelProps:{shrink:!0}}),Object(n.jsx)(k.a,{onChange:I,value:j.amount,label:"Amount",name:"amount",type:"number",InputProps:{startAdornment:Object(n.jsx)(C.a,{position:"start",children:"$"})},inputProps:{step:"0.01"}}),Object(n.jsxs)(ce.a,{className:e.classes.formControl,children:[Object(n.jsx)(se.a,{htmlFor:"broad_category",children:"Broad Category"}),Object(n.jsx)(ie.a,{onChange:I,value:j.broad_category_id,name:"broad_category_id",labelId:"broad_category",label:"Broad Category",children:e.categories.broad_categories.map((function(e){return Object(n.jsx)(le.a,{value:e.id,children:e.name})}))})]}),S.length>0?Object(n.jsxs)(ce.a,{className:e.classes.formControl,children:[Object(n.jsx)(se.a,{htmlFor:"narrow_category",children:"Narrow Category"}),Object(n.jsx)(ie.a,{onChange:I,value:j.narrow_category_id,name:"narrow_category_id",labelId:"narrow_category",label:"Narrow Category",children:null===S||void 0===S?void 0:S.map((function(e){return Object(n.jsx)(le.a,{value:e.id,children:e.name})}))})]}):null,x.person?Object(n.jsxs)(ce.a,{className:e.classes.formControl,children:[Object(n.jsx)(se.a,{htmlFor:"person_id",children:"Person"}),Object(n.jsx)(ie.a,{onChange:I,value:j.person_id,name:"person_id",labelId:"person_id",label:"Person",children:e.categories.persons.map((function(e){return Object(n.jsx)(le.a,{value:e.id,children:e.name})}))})]}):null,Object(n.jsx)(k.a,{onChange:I,value:j.notes,label:"Notes",name:"notes",type:"string",InputLabelProps:{shrink:!0}}),Object(n.jsx)(ue.a,{type:"submit",variant:"contained",color:"primary",children:"Submit"})]})]})}function fe(e){var t=o.a.useContext(mt),a=t.Auth,c=t.setAuth,s=t.setAlertState,l={date:new Date(Date.now()),amount:NaN,person_id:NaN,source:""},p=Object(r.useState)(l),b=Object(i.a)(p,2),j=b[0],h=b[1];function O(e){var t=e.target.name;h(Object(d.a)(Object(d.a)({},j),{},Object(u.a)({},t,e.target.value)))}function g(){return(g=Object(f.a)(m.a.mark((function t(n){var r,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),j.date&&j.amount&&j.person_id&&j.source){t.next=4;break}return s({severity:"error",message:"Please fill out all fields",open:!0}),t.abrupt("return");case 4:return r=Object(d.a)({},j),t.prev=5,r.date=null===(o=r.date)||void 0===o?void 0:o.toLocaleDateString("en-US"),e.setLoading(!0),t.next=10,M.postIncome(a.token,r);case 10:e.setLoading(!1),s({severity:"success",message:"Record Saved!",open:!0}),e.reloadWallChart(),t.next=26;break;case 15:if(t.prev=15,t.t0=t.catch(5),e.setLoading(!1),"Error! 500"!==t.t0.message){t.next=23;break}return s({severity:"error",message:"Server Error!",open:!0}),t.abrupt("return");case 23:$("income",r),s({severity:"warning",message:"Record Saved Locally",open:!0}),"Unauthorized"===t.t0.message&&c({type:"LOGOUT"});case 26:return t.prev=26,h(l),t.finish(26);case 29:case"end":return t.stop()}}),t,null,[[5,15,26,29]])})))).apply(this,arguments)}return Object(n.jsxs)(re.a,{children:[Object(n.jsx)(_.a,{className:e.classes.close,onClick:function(){h(l),e.handleClose()},children:Object(n.jsx)(pe.a,{})}),Object(n.jsx)(oe.a,{variant:"h5",component:"h5",className:e.classes.root,children:"Log Income"}),Object(n.jsxs)("form",{className:e.classes.root,onSubmit:function(e){return g.apply(this,arguments)},children:[Object(n.jsx)(je.a,{utils:be.a,children:Object(n.jsx)(he.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-inline",name:"Date",label:"Date",value:j.date,onChange:function(e){h(Object(d.a)(Object(d.a)({},j),{},{date:e}))},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(n.jsx)(k.a,{onChange:O,value:j.source,label:"Source",name:"source",type:"string",InputLabelProps:{shrink:!0}}),Object(n.jsx)(k.a,{onChange:O,value:j.amount,label:"Amount",name:"amount",type:"number",InputProps:{startAdornment:Object(n.jsx)(C.a,{position:"start",children:"$"})},inputProps:{step:"0.01"}}),Object(n.jsxs)(ce.a,{className:e.classes.formControl,children:[Object(n.jsx)(se.a,{htmlFor:"person_id",children:"Person"}),Object(n.jsx)(ie.a,{onChange:O,value:j.person_id,name:"person_id",labelId:"person_id",label:"Person",children:e.categories.persons.map((function(e){return Object(n.jsx)(le.a,{value:e.id,children:e.name})}))})]}),Object(n.jsx)(ue.a,{type:"submit",variant:"contained",color:"primary",children:"Submit"})]})]})}var Oe=a(33),ge=a(355),xe=a(340),ve=a(366),ye=a(367),we=a(359),ke=a(110),Ce=a.n(ke),_e=a(16),Se=a(344),Ne=a(343),Ie=a(145),Ee=a(141),Le=a.n(Ee),Ae=Object(D.a)((function(e){var t;return Object(N.a)({grow:{flexGrow:1},menuButton:{marginRight:e.spacing(1)},title:(t={display:"none"},Object(u.a)(t,e.breakpoints.up("sm"),{display:"block"}),Object(u.a)(t,"textAlign","center"),Object(u.a)(t,"textTransform","capitalize"),t),search:Object(u.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(_e.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(_e.c)(e.palette.common.white,.25)},marginRight:e.spacing(1),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(u.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),sectionDesktop:Object(u.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(u.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})})}));function Be(e){var t=e.setEditOpen,a=Ae(),r=o.a.useState(null),c=Object(i.a)(r,2),s=c[0],l=c[1],u=Boolean(s),d=o.a.useContext(mt),p=d.Auth,b=d.setAuth;function j(){t(!0)}function h(){M.downloadFile(p.token,"".concat(p.user,"_expenses.xlsx"),"2020-01-01","2020-12-31"),f()}function m(){b({type:"LOGOUT"}),function(){te.apply(this,arguments)}()}var f=function(){l(null)},O="primary-search-account-menu",g=Object(n.jsxs)(Ie.a,{anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},id:O,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:u,onClose:f,children:[Object(n.jsx)(le.a,{onClick:j,children:"Edit"}),Object(n.jsx)(le.a,{onClick:h,children:"Downloads"}),Object(n.jsx)(le.a,{onClick:m,children:"Logout"})]});return Object(n.jsxs)("div",{className:a.grow,children:[Object(n.jsx)(Se.a,{position:"static",children:Object(n.jsxs)(Ne.a,{children:[Object(n.jsxs)(oe.a,{className:a.title,variant:"h6",noWrap:!0,children:[p.user,"'s Finances"]}),Object(n.jsx)("div",{className:a.grow}),Object(n.jsxs)("div",{className:a.sectionDesktop,children:[Object(n.jsx)(ue.a,{color:"inherit",onClick:j,children:"Edit"}),Object(n.jsx)(ue.a,{color:"inherit",onClick:h,children:"Download"}),Object(n.jsx)(ue.a,{color:"inherit",onClick:m,children:"Logout"})]}),Object(n.jsx)("div",{className:a.sectionMobile,children:Object(n.jsx)(_.a,{"aria-label":"show more","aria-controls":O,"aria-haspopup":"true",onClick:function(e){l(e.currentTarget)},color:"inherit",children:Object(n.jsx)(Le.a,{})})})]})}),g]})}var Te=Object(S.a)((function(e){return Object(N.a)({head:{backgroundColor:e.palette.primary.main,color:e.palette.common.white,padding:10,fontSize:16},body:{padding:10,fontSize:14}})}))(y.a),Fe=Object(S.a)((function(e){return Object(N.a)({root:{backgroundColor:e.palette.background.default,cursor:"pointer"}})}))(w.a),Pe=Object(S.a)((function(e){return Object(N.a)({root:{backgroundColor:I.a[800]}})}))(w.a),Ue=Object(S.a)((function(e){return Object(N.a)({root:{backgroundColor:I.a[700]}})}))(w.a);function De(e){var t=Object(r.useState)([!1]),a=Object(i.a)(t,2),o=a[0],c=a[1];var s=e.state.data.reduce((function(e,t){if(t.broad_category)if(e[t.broad_category]?e[t.broad_category].total+=parseFloat(t.amount):e[t.broad_category]={total:parseFloat(t.amount),narrow_categories:{}},t.narrow_category)e[t.broad_category].narrow_categories[t.narrow_category]?e[t.broad_category].narrow_categories[t.narrow_category].total+=parseFloat(t.amount):e[t.broad_category].narrow_categories[t.narrow_category]={total:parseFloat(t.amount),persons:{}},t.person&&(e[t.broad_category].narrow_categories[t.narrow_category].persons[t.person]?e[t.broad_category].narrow_categories[t.narrow_category].persons[t.person]+=parseFloat(t.amount):e[t.broad_category].narrow_categories[t.narrow_category].persons[t.person]=parseFloat(t.amount));else if(t.person){var a;(null===(a=e[t.broad_category].narrow_categories["--"])||void 0===a?void 0:a.persons[t.person])?(e[t.broad_category].narrow_categories["--"].persons[t.person]+=parseFloat(t.amount),e[t.broad_category].narrow_categories["--"].total+=parseFloat(t.amount)):e[t.broad_category].narrow_categories=Object(d.a)(Object(d.a)({},e[t.broad_category].narrow_categories),{},{"--":{persons:Object(u.a)({},t.person,parseFloat(t.amount)),total:parseFloat(t.amount)}})}return e}),{});return console.log(s),Object(r.useEffect)((function(){var e=Object.keys(s).map((function(e){return!1}));c(e)}),[e]),Object(n.jsx)(F.a,{component:U.a,children:Object(n.jsxs)(B.a,{children:[Object(n.jsx)(P.a,{children:Object(n.jsxs)(w.a,{children:[Object(n.jsx)(Te,{children:"Broad category"}),Object(n.jsx)(Te,{children:"Narrow Category"}),Object(n.jsx)(Te,{children:"person"}),Object(n.jsx)(Te,{children:"amount"})]})}),Object(n.jsx)(T.a,{children:Object.keys(s).map((function(e,t){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(Fe,{onClick:function(){return function(e){var t=Object(j.a)(o);t[e]=!t[e],c(t)}(t)},children:[Object(n.jsx)(Te,{children:e}),Object(n.jsx)(Te,{children:"TOTAL"}),Object(n.jsx)(Te,{}),Object(n.jsxs)(Te,{children:["$",s[e].total.toFixed(2)]})]},t),s[e].narrow_categories&&o[t]?Object.keys(s[e].narrow_categories).map((function(t){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(Pe,{children:[Object(n.jsx)(Te,{}),Object(n.jsx)(Te,{children:t}),Object(n.jsx)(Te,{children:"TOTAL"}),Object(n.jsxs)(Te,{children:["$",s[e].narrow_categories[t].total.toFixed(2)]})]}),s[e].narrow_categories[t].persons?Object.keys(s[e].narrow_categories[t].persons).map((function(a){return Object(n.jsxs)(Ue,{children:[Object(n.jsx)(Te,{}),Object(n.jsx)(Te,{}),Object(n.jsx)(Te,{children:a}),Object(n.jsxs)(Te,{children:["$",s[e].narrow_categories[t].persons[a].toFixed(2)]})]})})):null]})})):null]})}))})]})})}var ze=a(345),We=a(346);function Re(e){var t=e.classes,a=e.handleFormSubmit,r=e.handleFormChange,o=e.formState;return Object(n.jsx)(ze.a,{className:t.root,children:Object(n.jsxs)(We.a,{variant:"outlined",children:[Object(n.jsx)("h2",{className:t.root,children:"Reports"}),Object(n.jsxs)("form",{onSubmit:a,className:t.root,children:[Object(n.jsxs)(ce.a,{variant:"outlined",className:t.formControl,children:[Object(n.jsx)(se.a,{htmlFor:"form",children:"Report"}),Object(n.jsxs)(ie.a,{name:"form",label:"Report",labelId:"form",value:o.form,onChange:r,children:[Object(n.jsx)(le.a,{value:"income",children:"Income"}),Object(n.jsx)(le.a,{value:"expenses",children:"Expenses"}),Object(n.jsx)(le.a,{value:"pivot",children:"Pivot Table"})]})]}),Object(n.jsx)(k.a,{onChange:r,value:o.year,label:"Year",name:"year",type:"number",variant:"outlined"}),Object(n.jsxs)(ce.a,{variant:"outlined",className:t.formControl,children:[Object(n.jsx)(se.a,{htmlFor:"month2",children:"Month"}),Object(n.jsxs)(ie.a,{onChange:r,value:o.month,name:"month",labelId:"month2",label:"Month",children:[Object(n.jsx)(le.a,{value:1,children:"January"}),Object(n.jsx)(le.a,{value:2,children:"February"}),Object(n.jsx)(le.a,{value:3,children:"March"}),Object(n.jsx)(le.a,{value:4,children:"April"}),Object(n.jsx)(le.a,{value:5,children:"May"}),Object(n.jsx)(le.a,{value:6,children:"June"}),Object(n.jsx)(le.a,{value:7,children:"July"}),Object(n.jsx)(le.a,{value:8,children:"August"}),Object(n.jsx)(le.a,{value:9,children:"September"}),Object(n.jsx)(le.a,{value:10,children:"October"}),Object(n.jsx)(le.a,{value:11,children:"November"}),Object(n.jsx)(le.a,{value:12,children:"December"})]})]}),Object(n.jsx)(ue.a,{type:"submit",variant:"contained",color:"primary",children:"View"})]})]})})}var Me=a(142);function Ge(e){var t=e.data;return Object(n.jsx)(ze.a,{children:Object(n.jsx)(Me.Line,{data:t,height:400,options:{maintainAspectRatio:!1}})})}var Je=a(347),$e=a(348),Ye=a(358);function Ve(e){var t=o.a.useContext(mt),a=t.Auth,c=t.setAuth,s=t.setAlertState,l={person:"",broad_category:"",broad_category_id:NaN,narrow_category:"",has_person:!1},p=Object(r.useState)(l),b=Object(i.a)(p,2),j=b[0],h=b[1];function O(e){var t=e.target.name,a=e.target.value;"has_person"===t&&(a=e.target.checked),h(Object(d.a)(Object(d.a)({},j),{},Object(u.a)({},t,a)))}function g(e,t){return x.apply(this,arguments)}function x(){return(x=Object(f.a)(m.a.mark((function t(n,r){var o,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),e.setLoading(!0),t.prev=2,t.t0=r,t.next="person"===t.t0?6:"broad_category"===t.t0?10:"narrow_category"===t.t0?14:18;break;case 6:if((o={person:j.person}).person){t.next=9;break}throw new Error("Empty Input");case 9:return t.abrupt("break",18);case 10:if((o={broad_category:j.broad_category,has_person:j.has_person}).broad_category){t.next=13;break}throw new Error("Empty Input");case 13:return t.abrupt("break",18);case 14:if((o={narrow_category:j.narrow_category,broad_category_id:j.broad_category_id,has_person:j.has_person}).narrow_category&&o.broad_category_id){t.next=17;break}throw new Error("Empty Input");case 17:return t.abrupt("break",18);case 18:return t.next=20,M.addCategories(a.token,o);case 20:return s({severity:"success",message:"Category Added!",open:!0}),t.next=23,M.getCategories(a.token);case 23:i=t.sent,e.setCategories(i),t.next=39;break;case 27:t.prev=27,t.t1=t.catch(2),t.t2=t.t1.message,t.next="Error! 500"===t.t2?32:"Unauthorized"===t.t2?34:"Empty Input"===t.t2?36:38;break;case 32:return s({severity:"error",message:"Server Error!",open:!0}),t.abrupt("break",39);case 34:return c({type:"LOGOUT"}),t.abrupt("break",39);case 36:return s({severity:"error",message:"Please fill out all fields",open:!0}),t.abrupt("break",39);case 38:s({severity:"error",message:"You must be connected to the internet to add categories",open:!0});case 39:return t.prev=39,e.setLoading(!1),h(l),t.finish(39);case 43:case"end":return t.stop()}}),t,null,[[2,27,39,43]])})))).apply(this,arguments)}return Object(n.jsxs)(re.a,{children:[Object(n.jsx)(_.a,{onClick:function(){return e.handleClose()},className:e.classes.close,children:Object(n.jsx)(pe.a,{})}),Object(n.jsx)(We.a,{className:e.classes.card,children:Object(n.jsxs)(Je.a,{children:[Object(n.jsx)(oe.a,{variant:"h5",component:"h5",className:e.classes.root,children:"Add a Person"}),Object(n.jsxs)("form",{className:e.classes.root,onSubmit:function(e){return g(e,"person")},children:[Object(n.jsx)(k.a,{onChange:O,value:j.person,label:"Person",name:"person",type:"string"}),Object(n.jsx)(ue.a,{type:"submit",variant:"contained",color:"primary",children:"Add"})]})]})}),Object(n.jsx)(We.a,{className:e.classes.card,children:Object(n.jsxs)(Je.a,{children:[Object(n.jsx)(oe.a,{variant:"h5",component:"h5",className:e.classes.root,children:"Add a Broad Category"}),Object(n.jsxs)("form",{className:e.classes.root,onSubmit:function(e){return g(e,"broad_category")},children:[Object(n.jsx)(k.a,{onChange:O,value:j.broad_category,label:"Broad Category",name:"broad_category",type:"string"}),Object(n.jsx)($e.a,{control:Object(n.jsx)(Ye.a,{checked:j.has_person,onChange:O,name:"has_person",inputProps:{"aria-label":"primary checkbox"}}),label:"Person"}),Object(n.jsx)(ue.a,{type:"submit",variant:"contained",color:"primary",children:"Add"})]})]})}),Object(n.jsx)(We.a,{className:e.classes.card,children:Object(n.jsxs)(Je.a,{children:[Object(n.jsx)(oe.a,{variant:"h5",component:"h5",className:e.classes.root,children:"Add a Narrow Category"}),Object(n.jsxs)("form",{className:e.classes.root,onSubmit:function(e){return g(e,"narrow_category")},children:[Object(n.jsxs)(ce.a,{className:e.classes.formControl,children:[Object(n.jsx)(se.a,{htmlFor:"broad_category",children:"Broad Category"}),Object(n.jsx)(ie.a,{onChange:O,name:"broad_category_id",labelId:"broad_category_id",label:"Broad Category",children:e.categories.broad_categories.map((function(e){return Object(n.jsx)(le.a,{value:e.id,children:e.name})}))})]}),Object(n.jsx)(k.a,{onChange:O,value:j.narrow_category,label:"Narrow Category",name:"narrow_category",type:"string"}),Object(n.jsx)(ue.a,{type:"submit",variant:"contained",color:"primary",children:"Add"})]})]})})]})}var He=function(){var e,t,a,c=Object(Oe.a)(),s=o.a.useContext(mt),l=s.Auth,p=s.setAuth,b=s.setAlertState,h=s.setLoading,O=Object(r.useState)({form:"expenses",year:new Date(Date.now()).getUTCFullYear(),month:new Date(Date.now()).getUTCMonth()+1}),g=Object(i.a)(O,2),x=g[0],v=g[1],y=Object(r.useState)({schema:{fields:[]},data:[{amount:"",date:"",source:"",person:"",id:NaN,person_id:NaN}]}),w=Object(i.a)(y,2),k=w[0],C=w[1],_=Object(r.useState)({schema:{fields:[]},data:[{amount:"",date:"",source:"",vendor:"",broad_category:"",narrow_category:"",person:"",notes:"",id:NaN}]}),S=Object(i.a)(_,2),I=S[0],E=S[1],L=Object(r.useState)({persons:[],narrow_categories:[],broad_categories:[]}),A=Object(i.a)(L,2),B=A[0],T=A[1],F=Object(r.useReducer)((function(e,t){return t.labels.length>0&&(e={labels:t.labels,datasets:[{label:"Income",data:t.income,fill:!1,borderColor:c.palette.primary.main},{label:"Expenses",data:t.expenses,fill:!1,borderColor:c.palette.secondary.main}]}),e}),{labels:[],datasets:[{label:"Income",data:[],fill:!1,borderColor:c.palette.primary.main},{label:"Expenses",data:[],fill:!1,borderColor:c.palette.secondary.main}]}),P=Object(i.a)(F,2),U=P[0],W=P[1];function R(e){if(e.date){var t=new Date(e.date),a=t.getUTCFullYear(),n=(1+t.getUTCMonth()).toString();n=n.length>1?n:"0"+n;var r=t.getUTCDate().toString(),o=n+"/"+(r=r.length>1?r:"0"+r)+"/"+a;return e.date=o,e}return e}function G(){return(G=Object(f.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),a=x.form,h(!0),e.next=6,M[a](l.token,x);case 6:n=e.sent,h(!1),"pivot"!==a&&(n.data=n.data.map(R)),e.t0=a,e.next="expenses"===e.t0?12:"income"===e.t0?14:"pivot"===e.t0?16:18;break;case 12:return E(n),e.abrupt("break",18);case 14:return C(n),e.abrupt("break",18);case 16:return E(n),e.abrupt("break",18);case 18:e.next=25;break;case 20:e.prev=20,e.t1=e.catch(0),"Unauthorized"===e.t1.message&&p({type:"LOGOUT"}),h(!1),b({severity:"error",message:"Error Fetching Data",open:!0});case 25:case"end":return e.stop()}}),e,null,[[0,20]])})))).apply(this,arguments)}function J(e,t){var a,n;switch(e){case"person":a=B.persons,n="person_id";break;case"broad_category":a=B.broad_categories,n="broad_category_id";break;case"narrow_category":a=B.narrow_categories,n="narrow_category_id"}var r=a.filter((function(e){return e.name===t}))[0];return r?{id:n,dataListItem:r}:{id:null,dataListItem:null}}function $(){return($=Object(f.a)(m.a.mark((function e(t,a){var n,r,o,c,s,i,l,b;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=t.target,r=n.name,o=n.value,c=Object(j.a)(I.data),s=Object(d.a)(Object(d.a)({},c[a]),{},Object(u.a)({},r,o)),"person"!==r&&"broad_category"!==r&&"narrow_category"!==r||(i=J(r,o),l=i.id,b=i.dataListItem,l&&b&&(s=Object(d.a)(Object(d.a)({},s),{},Object(u.a)({},l,b.id)))),c[a]=s,E(Object(d.a)(Object(d.a)({},I),{},{data:c}))}catch(h){console.error(h),"Unauthorized"===h.message&&p({type:"LOGOUT"})}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(f.a)(m.a.mark((function e(t,a){var n,r,o,c,s,i,l,p;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=t.target,r=n.name,o=n.value,c=Object(j.a)(k.data),s=Object(d.a)(Object(d.a)({},c[a]),{},Object(u.a)({},r,o)),"person"===r&&(i=J(r,o),l=i.id,p=i.dataListItem,l&&p&&(s=Object(d.a)(Object(d.a)({},s),{},Object(u.a)({},l,p.id)))),c[a]=s,C(Object(d.a)(Object(d.a)({},k),{},{data:c}))}catch(b){console.error(b)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(f.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.updateExpenses(l.token,I.data[t]);case 3:b({severity:"success",message:"Record updated!",open:!0}),X(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),b({severity:"error",message:"Error: Failed to save!",open:!0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function q(){return(q=Object(f.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.updateIncome(l.token,k.data[t]);case 3:b({severity:"success",message:"Record updated!",open:!0}),X(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),b({severity:"error",message:"Error: Failed to save!",open:!0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function X(){return ee.apply(this,arguments)}function ee(){return(ee=Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.wallchart(l.token);case 3:t=e.sent,W(t),Q(t),e.next=18;break;case 8:if(e.prev=8,e.t0=e.catch(0),"No Data"!==e.t0.message){e.next=14;break}console.log("No Data!"),e.next=18;break;case 14:return e.next=16,Z();case 16:t=e.sent,W(t);case 18:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function te(e){return ae.apply(this,arguments)}function ae(){return(ae=Object(f.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"expenses"!==x.form){e.next=8;break}return e.next=4,M.deleteExpenses(l.token,t);case 4:a=I.data.filter((function(e){return e.id!==t})),E(Object(d.a)(Object(d.a)({},I),{},{data:a})),e.next=13;break;case 8:if("income"!==x.form){e.next=13;break}return e.next=11,M.deleteIncome(l.token,t);case 11:n=k.data.filter((function(e){return e.id!==t})),C(Object(d.a)(Object(d.a)({},k),{},{data:n}));case 13:X(),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0),"Unauthorized"===e.t0&&p({type:"LOGOUT"});case 20:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}var ne=Object(D.a)((function(e){var t;return Object(N.a)({home:{padding:"0 0 6em 0"},formControl:{margin:e.spacing(1),minWidth:"10em"},selectEmpty:{marginTop:e.spacing(2)},root:(t={display:"flex",justifyContent:"center",flexWrap:"wrap"},Object(u.a)(t,e.breakpoints.up("md"),{flexWrap:"noWrap"}),Object(u.a)(t,"& > *",Object(u.a)({margin:e.spacing(1)},e.breakpoints.down("xs"),{width:"100%"})),t),wallchart:{width:"100%"},logoutBtn:{position:"fixed",top:"0px",right:"0px",margin:"1em"},downloadBtn:{position:"fixed",top:"0px",right:"100px",margin:"1em"},editBtn:{position:"fixed",top:"0px",left:"0px",margin:"1em"},offline:{backgroundColor:e.palette.secondary.main,color:"white",textAlign:"center",position:"sticky"},speedDial:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2)},dialog:{width:"100%"},datePicker:Object(u.a)({},e.breakpoints.down("sm"),{marginLeft:"-10px"}),card:{margin:"1em 0"},close:{position:"absolute",right:"0",top:"0"}})}))(),re=o.a.useState(!1),oe=Object(i.a)(re,2),ce=oe[0],se=oe[1],ie=[{icon:Object(n.jsx)(Ce.a,{}),name:"Expenses",action:function(){pe(!0),se(!1)},operation:"product"},{icon:Object(n.jsx)(Ce.a,{}),name:"Income",action:function(){ke(!0),se(!1)},operation:"tag"}],le=Object(r.useState)(!1),ue=Object(i.a)(le,2),de=ue[0],pe=ue[1],be=Object(r.useState)(!1),je=Object(i.a)(be,2),he=je[0],ke=je[1],_e=Object(r.useState)(!1),Se=Object(i.a)(_e,2),Ne=Se[0],Ie=Se[1];function Ee(){pe(!1),ke(!1),Ie(!1)}var Le=Object(r.useState)(!1),Ae=Object(i.a)(Le,2),Te=(Ae[0],Ae[1]);return window.addEventListener("offline",(function(){return Te(!0)})),window.addEventListener("online",(function(){return Te(!1)})),Object(r.useEffect)((function(){function e(){return(e=Object(f.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.getCategories(l.token);case 3:t=e.sent,T(t),V(t),e.next=14;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,K();case 12:a=e.sent,T(a);case 14:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),X(),navigator.onLine||Te(!0)}),[l.token]),Object(n.jsxs)(ge.a,{component:"div",className:ne.home,children:[Object(n.jsx)(Be,{setEditOpen:Ie}),Object(n.jsxs)(ge.a,{component:"header",className:"header",children:[Object(n.jsx)("h1",{style:{textAlign:"center"},children:"Wall Chart"}),Object(n.jsx)(Ge,{data:U}),Object(n.jsx)(Re,{classes:ne,handleFormSubmit:function(e){return G.apply(this,arguments)},handleFormChange:function(e){var t=e.target.name;v(Object(d.a)(Object(d.a)({},x),{},Object(u.a)({},t,e.target.value)))},formState:x})]}),Object(n.jsxs)("div",{className:"body",children:["income"===x.form&&(null===(e=k.data[0])||void 0===e?void 0:e.id)?Object(n.jsx)(z,{state:k,dataLists:B,handleChange:function(e,t){return Y.apply(this,arguments)},handleUpdate:function(e){return q.apply(this,arguments)},deleteEntry:te,form:x.form}):null,"expenses"===x.form&&(null===(t=I.data[0])||void 0===t?void 0:t.id)?Object(n.jsx)(z,{state:I,dataLists:B,handleChange:function(e,t){return $.apply(this,arguments)},handleUpdate:function(e){return H.apply(this,arguments)},deleteEntry:te,form:x.form}):null,"pivot"===x.form&&(null===(a=I.data[0])||void 0===a?void 0:a.id)?Object(n.jsx)(De,{state:I}):null]}),Object(n.jsx)(xe.a,{onClose:Ee,open:Ne,maxWidth:"xl",children:Object(n.jsx)(Ve,{classes:ne,handleClose:Ee,categories:B,setCategories:T,setLoading:h})}),Object(n.jsx)(xe.a,{onClose:Ee,open:de,maxWidth:"xl",children:Object(n.jsx)(me,{classes:ne,handleClose:Ee,categories:B,setLoading:h,reloadWallChart:X})}),Object(n.jsx)(xe.a,{onClose:Ee,open:he,maxWidth:"xl",children:Object(n.jsx)(fe,{classes:ne,handleClose:Ee,categories:B,setLoading:h,reloadWallChart:X})}),Object(n.jsx)(ve.a,{ariaLabel:"SpeedDial",className:ne.speedDial,icon:Object(n.jsx)(ye.a,{}),onClose:function(){se(!1)},onOpen:function(){se(!0)},open:ce,onMouseLeave:function(){},children:ie.map((function(e){return Object(n.jsx)(we.a,{icon:e.icon,tooltipTitle:e.name,tooltipOpen:!0,onClick:e.action},e.name)}))})]})},Ke=a(350),qe=Object(D.a)((function(e){return Object(N.a)({root:{display:"flex",justifyContent:"center",flexWrap:"wrap","& > *":Object(u.a)({margin:e.spacing(1)},e.breakpoints.down("xs"),{width:"100%"})},heading:{textAlign:"center",fontFamily:"Times New Roman, serif"}})}));function Qe(e){var t=e.handleClose,a=o.a.useContext(mt),c=a.setAlertState,s=a.setLoading,l=Object(r.useState)({username:"",password:""}),p=Object(i.a)(l,2),b=p[0],j=p[1],h=function(e){var t=e.target,a=t.name,n=t.value;j(Object(d.a)(Object(d.a)({},b),{},Object(u.a)({},a,n)))},O=function(){var e=Object(f.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),s(!0),e.prev=2,e.next=5,M.signup(b);case 5:c({severity:"success",message:"You're signed up! Please log in",open:!0}),t(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),c({severity:"error",message:"Error Signing Up!",open:!0});case 13:return e.prev=13,s(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,9,13,16]])})));return function(t){return e.apply(this,arguments)}}(),g=qe();return Object(n.jsx)(re.a,{children:Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)(oe.a,{variant:"h2",component:"h4",className:g.heading,children:"Sign Up"}),Object(n.jsxs)("form",{className:g.root,onSubmit:O,children:[Object(n.jsx)(k.a,{onChange:h,value:b.username,type:"text",name:"username",label:"username",variant:"outlined"}),Object(n.jsx)(k.a,{onChange:h,value:b.password,type:"password",name:"password",label:"password",variant:"outlined"}),Object(n.jsx)(ue.a,{variant:"contained",color:"primary",name:"signup",type:"submit",children:"Sign Up"})]})]})})}var Xe=Object(D.a)((function(e){return Object(N.a)({root:{flexGrow:1},heading:{textAlign:"center",fontFamily:"Times New Roman, serif"},signupBtn:{float:"right",margin:"1em"},sidebar:{display:"flex",justifyContent:"center",textAlign:"center",flexWrap:"wrap"},form:{display:"flex",justifyContent:"center",textAlign:"center",flexWrap:"wrap","& > *":Object(u.a)({margin:e.spacing(1),display:"flex",justifyContent:"center",textAlign:"center",flexWrap:"wrap"},e.breakpoints.down("xs"),{width:"100%"})},link:{color:e.palette.primary.main,"&:hover":e.palette.secondary.main}})}));function Ze(){var e=o.a.useContext(mt),t=e.Auth,a=e.setAuth,c=e.setAlertState,s=e.setLoading,l=Object(r.useState)({username:"",password:""}),b=Object(i.a)(l,2),j=b[0],h=b[1],O=Object(r.useState)(!1),g=Object(i.a)(O,2),x=g[0],v=g[1],y=function(e){var t=e.target,a=t.name,n=t.value;h(Object(d.a)(Object(d.a)({},j),{},Object(u.a)({},a,n)))},w=function(){var e=Object(f.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s(!0),e.prev=2,e.next=5,M.login(j);case 5:n=e.sent,a({type:"LOGIN",payload:{user:j.username,token:n.token}}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),c({severity:"error",message:"Incorrect username or password",open:!0});case 13:return e.prev=13,s(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,9,13,16]])})));return function(t){return e.apply(this,arguments)}}(),C=Xe();function _(){v(!1)}return t.loggedIn?Object(n.jsx)(p.a,{to:"/"}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(Ke.a,{container:!0,className:C.root,children:[Object(n.jsx)(Ke.a,{item:!0,xs:12,children:Object(n.jsx)(oe.a,{variant:"h1",component:"h2",gutterBottom:!0,className:C.heading,children:"Flask of Finances"})}),Object(n.jsx)(Ke.a,{item:!0,xs:12,className:C.sidebar,children:Object(n.jsxs)("form",{className:C.form,onSubmit:w,children:[Object(n.jsx)(k.a,{onChange:y,value:j.username,type:"text",name:"username",label:"username",variant:"outlined"}),Object(n.jsx)(k.a,{onChange:y,value:j.password,type:"password",name:"password",label:"password",variant:"outlined"}),Object(n.jsx)(ue.a,{variant:"contained",color:"primary",name:"login",type:"submit",children:"Login"})]})}),Object(n.jsx)(Ke.a,{item:!0,xs:12,className:C.sidebar,children:Object(n.jsx)(ue.a,{className:C.link,onClick:function(){return v(!0)},children:"Sign Up"})})]}),Object(n.jsx)(xe.a,{onClose:_,open:x,maxWidth:"xl",children:Object(n.jsx)(Qe,{handleClose:_})})]})}a(280);var et=a(360),tt=a(356);function at(e){return Object(n.jsx)(tt.a,Object(d.a)({elevation:6,variant:"filled"},e))}var nt=Object(D.a)((function(e){return{snackbar:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function rt(e){var t=e.state,a=e.setState,r=nt(),o=function(e,n){"clickaway"!==n&&a(Object(d.a)(Object(d.a)({},t),{},{open:!1}))};return Object(n.jsx)("div",{className:r.snackbar,children:Object(n.jsx)(et.a,{open:t.open,autoHideDuration:3e3,onClose:o,children:Object(n.jsx)(at,{onClose:o,severity:t.severity,children:t.message})})})}var ot=a(144),ct=a(352),st=a(91),it=a(351),lt=a(353),ut=a(284),dt=a(342),pt=Object(ot.a)();var bt,jt=(bt={palette:{type:"dark",background:{default:I.a[900]},primary:{main:st.a[900]},secondary:{main:it.a[800]}}},Object(ot.a)(Object(d.a)({overrides:{MuiPickersBasePicker:{container:Object(u.a)({backgroundColor:I.a[900]},pt.breakpoints.down("xs"),{marginLeft:"-10px"})},MuiCard:{root:{backgroundColor:I.a[900]}},MuiDialogContent:{root:{backgroundColor:I.a[900]}},MuiPickersCalendarHeader:{iconButton:{backgroundColor:I.a[900]}}}},bt))),ht=function(e){var t=e.component,a=e.loggedIn,r=Object(l.a)(e,["component","loggedIn"]);return Object(n.jsx)(p.b,Object(d.a)(Object(d.a)({},r),{},{render:function(e){return a?Object(n.jsx)(t,Object(d.a)({},e)):Object(n.jsx)(p.a,{to:"/login"})}}))},mt=o.a.createContext({Auth:{loggedIn:!1,user:"",token:""},setAuth:function(){},setAlertState:function(){},setLoading:function(){}});function ft(){var e=Object(D.a)((function(e){return Object(N.a)({backdrop:{zIndex:1301,color:"#fff"}})}))(),t=Object(r.useReducer)((function(e,t){return"LOGIN"===t.type&&t.payload?(localStorage.setItem("user",t.payload.user),localStorage.setItem("token",t.payload.token),Object(d.a)(Object(d.a)({},e),{},{loggedIn:!0,user:t.payload.user,token:t.payload.token})):"LOGOUT"===t.type?(localStorage.clear(),Object(d.a)(Object(d.a)({},e),{},{loggedIn:!1,user:"",token:""})):e}),{loggedIn:!1,user:"",token:""}),a=Object(i.a)(t,2),o=a[0],c=a[1],s=Object(r.useState)({severity:void 0,message:"",open:!1}),l=Object(i.a)(s,2),u=l[0],j=l[1],h=Object(r.useState)(!1),m=Object(i.a)(h,2),f=m[0],O=m[1];return Object(r.useEffect)((function(){var e=localStorage.getItem("token"),t=localStorage.getItem("user");e&&M.checkAuth(e).then((function(t){return c({type:"LOGIN",payload:{user:t.username,token:e}})})).catch((function(a){"Unauthorized"===a.message?c({type:"LOGOUT"}):c({type:"LOGIN",payload:{user:t||"",token:e||""}})}))}),[]),Object(r.useEffect)((function(){!function(){J.apply(this,arguments)}()})),Object(n.jsxs)(ct.a,{theme:jt,children:[Object(n.jsx)(lt.a,{}),Object(n.jsxs)(mt.Provider,{value:{Auth:o,setAuth:c,setAlertState:j,setLoading:O},children:[Object(n.jsxs)(b.a,{children:[Object(n.jsx)(ht,{path:"/",loggedIn:o.loggedIn,setLoggedIn:c,component:He}),Object(n.jsx)(p.b,{exact:!0,path:"/login",children:Object(n.jsx)(Ze,{})})]}),Object(n.jsx)(rt,{state:u,setState:j}),Object(n.jsx)(ut.a,{className:e.backdrop,open:f,children:Object(n.jsx)(dt.a,{disableShrink:!0,color:"inherit"})})]})]})}var Ot=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function gt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var xt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,370)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),o(e),c(e)}))};s.a.render(Object(n.jsx)(ft,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Ot?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):gt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):gt(t,e)}))}}(),xt()}},[[281,1,2]]]);
//# sourceMappingURL=main.eb65d8b6.chunk.js.map